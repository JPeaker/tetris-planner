{"version":3,"sources":["static/background.png","store/actions.ts","store/types.ts","store/index.ts","setup-components/SetupStepper.tsx","reusable/filled-grid.ts","reusable/block.tsx","reusable/tetris-grid.tsx","option-components/OptionStepper.tsx","compare-components/CompareStepper.tsx","layout-components/LocalStepper.tsx","setup-components/FillPlayfield.tsx","setup-components/AddHoles.tsx","setup-components/choose-piece-input-handler.ts","reusable/PieceSelector.tsx","setup-components/SetupPlayfield.tsx","setup-components/setup-input-handler.ts","input-handler.ts","option-components/OptionSummarize.tsx","reusable/PlacePieces.tsx","option-components/OptionsPlayfield.tsx","compare-components/calculate-comparison.ts","compare-components/CompareSummarize.tsx","compare-components/ComparePlayfield.tsx","layout-components/Playfield.tsx","layout-components/NextBox.tsx","layout-components/TopBox.tsx","App.tsx","serviceWorker.js","index.js"],"names":["module","exports","setState","state","type","setPlayOptionsOption","id","setPlayOptionsOptionState","setPlayOptionsOptionPossibility","piece","addComparison","firstOption","secondOption","setComparisonActivePiece","AppStateCategory","AppState","OptionState","getAppStateCategory","SETUP_GRID","SETUP_ADD_HOLES","SETUP_CHOOSE_PRIMARY_PIECE","SETUP_CHOOSE_NEXT_PIECE","SETUP","OPTIONS_SUMMARIZE","OPTIONS_PLACE_PRIMARY_PIECE","OPTIONS_PLACE_NEXT_PIECE","OPTIONS_PLACE_POSSIBILITY","OPTIONS","COMPARE","COMPARE_ACTIVE","COMPARE_COMPLETE","grid","i","row","j","push","DefaultState","primaryPiece","nextPiece","activeOptionId","options","activeComparisonId","comparisons","changeOption","affectOption","existingOptionIndex","findIndex","option","existingOption","Object","assign","Error","getNewOption","UNSTARTED","gridAfterFirstPiece","gridAfterNextPiece","gridAfterFirstPieceBeforeClear","gridAfterNextPieceBeforeClear","currentPossibility","Piece","I","T","O","L","J","S","Z","getNewComparison","activePiece","appReducer","action","gridBeforeClear","newId","Math","max","map","o","find","newComparisonId","comparison","undefined","filter","c","advanceComparison","PieceList","p","value","length","thisComparison","clearComparison","SetupStepper","Stepper","className","activeStep","this","props","orientation","Step","key","StepLabel","StepContent","React","Component","connect","currentPiece","dispatch","setAppState","moveToPlayOptions","filledGrid","Block","nearInvisible","slightlyHidden","showDiff","column","onMouseEnter","onClick","disabled","width","adjustedValue","draggable","style","onMouseDown","classnames","block","hidden","onDragEnter","TetrisGrid","beforeGrid","blockSizeInRem","onMouseLeave","getBlockProps","hideTopTwoRows","numberOfRows","numberOfColumns","height","margin","rowKey","blocks","beforeBlocks","blockIndex","getRow","OptionStepper","marginBottom","Grid","container","justify","item","xs","setActivePieceId","getPieceGrid","possibilityGrid","reduce","gridSoFar","currentValue","completeOption","DONE","CompareStepper","index","comparisonFinished","comparisonId","LocalStepper","category","getStepper","FillPlayfield","hoverBlock","pasteHandler","setHoverBlock","bind","clickBlock","PasteHandler","setUpPasteability","board","setGrid","_","cloneDeep","placeholder","display","AddHoles","numpadMap","Numpad5","Numpad4","Numpad6","Numpad7","Numpad9","Numpad1","Numpad3","PieceSelector","setPieceFromInput","event","code","startsWith","preventDefault","pieceKey","substring","label","digit","parseInt","choosePieceInputHandler","setPiece","document","addEventListener","removeEventListener","direction","alignItems","drawPiece","SetupPlayfield","keyDownHandler","inputHandler","setPrimaryPiece","setNextPiece","GridState","PlacePieces","getNewPiece","setPieceInPlace","movePiece","rowModifier","blockMinRows","firstBlockInTheWay","rowIndex","indexOf","min","orientationModifier","columnModifier","newPiece","newGrid","forEach","gridAfterPlaceBeforeClear","every","isRowComplete","splice","unshift","Array","fill","getPiece","drawnGrid","OptionSummarize","selectedOption","visibleOption","checked","gridState","START","beforeIntervalId","setInterval","getNextGridState","toggleExpansion","getOptionPanel","showOption","hideOption","clearInterval","currentState","PRIMARY_PLACE","AFTER_PRIMARY","NEXT_PLACE","AFTER_NEXT","stopPropagation","includes","checkedId","sort","stateGrid","ExpansionPanel","expanded","ExpansionPanelSummary","expandIcon","FormControlLabel","control","Checkbox","toggleChecked","IconButton","goToOption","ExpansionPanelDetails","option1","option2","compareMethod","List","ListItem","role","button","addOption","optionIndex","editComparison","setActiveComparison","getPlayfield","join","ComparisonChoice","OptionsPlayfield","setPossibility","advancePossibility","NEXT_PIECE","setPlayOptionsOptionGridAfterFirstPiece","POSSIBILITIES","setPlayOptionsOptionGridAfterNextPiece","possibility","setPlayOptionsOptionGridAfterPossibility","biasedChanceMap","pieceProbabilities","latestPiece","getPieceProbabilities","firstCount","secondCount","weightedValue","FIRST","SECOND","SAME","CompareState","CompareSummarize","getAnimationGrid","message","result","calculateComparison","spacing","marginTop","ComparePlayfield","compareState","toggleOption","chooseOption","PLACE","CLEAR","activePossibility","nowGrid","ListItemIcon","edge","tabIndex","disableRipple","ListItemText","primary","activeComparison","firstGrid","secondGrid","getOptionGroup","Button","size","variant","setComparisonPieceChoice","Playfield","stateCategory","NextBox","nextPossibility","activePossibilityIndex","TopBox","Tabs","Tab","goToCategory","optionsDisabled","compareDisabled","App","src","background","alt","Boolean","window","location","hostname","match","preloadedState","store","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__","darkTheme","createMuiTheme","palette","paper","ReactDOM","render","StrictMode","ThemeProvider","theme","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.c8d3491b.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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xxHqc3t7fimjeerzdwcAAACCCAAAABBEAAAAgCDnKT18vVq9d3r4YH1L9Tj21m+LuoZj6K33OX3V3j8wwpzXxynzf46l+v5r9fm7AwAAAEEEAAAACCIAAABAkE97AEZ8zmhNDx+sb06PY22pnkh1DcfQW++9a07N+wdGmPP6WP/uiH79EerzdwcAAACCCAAAABBEAAAAgCACAAAABBEAAAAgiAAAAABBBAAAAAji7wDAwc35nONab/22qGs4ht56711zakutP9Di7wAAAACHJQAAAEAQAQAAAILYAwAH16qp3n7cpXpw1TUcQ2+9z1lz6sf0HgemmDKv6sf8+vO7jOwBAAAANk4AAACAIAIAAAAEsQcADs4eAGCEre0BgBFac88eAAAAYDcEAAAACCIAAABAEHsA4ODsAQBGWHMPQK338TBF77yyBwAAANgNAQAAAIIIAAAAEMQeADg4ewCAEX5qD0BL6zgwxdbm2+j35+4AAABAEAEAAACCCAAAABDEHgA4uFZNLdWP26rfFnUNx9Bb771rzpTj96rPZ8Tx92709XH972tdH3sAAACAWQQAAAAIIgAAAECQc+/nnk6xVA9x3QsFfE+rpuwBAOborfc5ewBG9ECPOP7ejb4+rv99a15/dwAAACCIAAAAAEEEAAAACCIAAABAEAEAAACCCAAAABBEAAAAgCACAAAABBEAAAAgiAAAAABBBAAAAAgiAAAAQBABAAAAgggAAAAQRAAAAIAgAgAAAAQRAAAAIIgAAAAAQQQAAAAIIgAAAEAQAQAAAIIIAAAAEEQAAACAIOfyfRWXy6WMPrter2V0Or1+vJfR6fT08FhGwHe1ampKPdZ667dFXcMx9NZ775pTH//t+aWM5mn9t0Zo/f/Oseb5j77+e39+984dAAAACCIAAABAEAEAAACCnKf08PVq9fjaAwDra9WUPQDAHL31voU9AL/+/C6jMer/3xHn37vezrHUOdda57+X69N6fvfIHQAAAAgiAAAAQBABAAAAgpzX/JxaewBgfa2asgcAmKO33rewB2C01no4usfd9fnL9Z/OHQAAAAgiAAAAQBABAAAAgggAAAAQRAAAAIAgAgAAAAQRAAAAIIgAAAAAQQQAAAAIIgAAAEAQAQAAAIIIAAAAEEQAAACAIAIAAAAEEQAAACCIAAAAAEEEAAAACCIAAABAEAEAAACCCAAAABBEAAAAgCACAAAABBEAAAAgyPn1470MT6e355cymud6vZbRZ5fLpYw+qx9fn8/Tw2MZAd/Vqqkp9Vjrrd8WdQ3H0FvvvWvOmu9P+Grv19/8uc8dAAAACCIAAABAEAEAAACC2AMAB9eqKXsAgDl6631rewCmnH+a+vk60vU3f/6qn193AAAAIIgAAAAAQQQAAAAIYg8AHFyrpuwBAOborfct7wFY6vh7N/r67P36H+n83QEAAIAgAgAAAAQRAAAAIIgAAAAAQQQAAAAIIgAAAEAQAQAAAIIIAAAAEEQAAACAIAIAAAAEEQAAACCIAAAAAEEEAAAACCIAAABAEAEAAACCCAAAABBEAAAAgCACAAAABBEAAAAgiAAAAABBBAAAAAgiAAAAQBABAAAAgpxfP97L8HR6e34po3mu12sZfXa5XMros/rx9fk8PTyWEfBdrZqaUo+13vptUddwDL313rvmcN+a799GcP5frXn+7gAAAEAQAQAAAIIIAAAAEMQeADi4Vk3ZAwDM0VvvvWvOlOP3qs9nxPFHa53/iPdva17/vZx/yx6vvzsAAAAQRAAAAIAgAgAAAASxBwAOrlVTa+4BaPV9Avs1pa7nrDn1MUf3WC91/NFGn7/j/6w1r487AAAAEEQAAACAIAIAAAAEEQCAIZ4eHv/5ev14/+er/DOwc3Vd1/Ve/hnYMAEAAACCCAAAABBEAAAAgCCb/jsAwLLq9tw5fwegfkzr52oZMrXWmSnrRm30+5MRxx9t9Pk7/s9a8/q4AwAAAEEEAAAACCIAAABAkOF7AKb0/9XqxwDLmlJ3U3pzW8epqWXItNT6oEf8q9Hn7/g/a83r4w4AAAAEEQAAACCIAAAAAEE2twcAWN9SNavGgTnrRk2P+Fejz9/xf9aa18cdAAAACCIAAABAEAEAAACCrLoHoFY/pqZvGMbprbveWla/QG3O+wE94l+NPn/H/1lrXh93AAAAIIgAAAAAQQQAAAAIci7fh+ntCa77k4BlqUdgL/SIf7Xmmjz6+nOfPQAAAMBiBAAAAAgiAAAAQJBPfwdgKU8Pj2X0uYdpKaOPv3euz33m533O/z7X59hcn5/Vuv72APzVOv8RRlyT0ed/1Pq1BwAAAJhFAAAAgCACAAAABPm0B2AvPXZ77+EbzfW5z/y8z/nf5/ocm+vzs9Tvfc7/PvV7X3193AEAAIAgAgAAAAQRAAAAIIgAAAAAQQQAAAAIIgAAAEAQAQAAAIIIAAAAEEQAAACAIAIAAAAEEQAAACCIAAAAAEEEAAAACCIAAABAEAEAAACCCAAAABBEAAAAgCACAAAABBEAAAAgiAAAAABBBAAAAAgiAAAAQBABAAAAgpxfP97L8HR6e34po3mu12sZnU6jjz/a5XIpo+Wsef57v/6j7f36OP+v6vPf+/FH2/v5c2zm58+yfh6bOwAAABBEAAAAgCACAAAABNnlHoBff36X0RhPD49ltG4P3FKOev6jeX7/Omp97f34S7E+/Cznf9/o+VkbsdYd9fm1fh6POwAAABBEAAAAgCACAAAABNnlHoDRfqpHzfH/Mn/uc33uc/z7HP9nOf/7XJ+ftffnd+/Xf03uAAAAQBABAAAAgggAAAAQRAAAAIAgAgAAAAQRAAAAIIgAAAAAQQQAAAAIIgAAAEAQAQAAAIIIAAAAEEQAAACAIAIAAAAEEQAAACCIAAAAAEEEAAAACCIAAABAEAEAAACCCAAAABBEAAAAgCACAAAABBEAAAAgiAAAAABBzq8f72V4Or09v5TRPNfrtYzGc/5fHen8XZ+v1jz/0fY+f8z/+/Z4fUbz/N635vnvnfnzlfkznTsAAAAQRAAAAIAgAgAAAMQ4nf4Lji0tXfC7e88AAAAASUVORK5CYII=\"","import { Grid, Piece } from 'nes-tetris-representation/lib/piece-types';\r\nimport { AppState, OptionState } from './types';\r\n\r\nexport const RESET_SCENARIO = 'RESET_SCENARIO';\r\nexport interface ResetScenarioAction {\r\n  type: typeof RESET_SCENARIO;\r\n};\r\nexport function resetScenario(): ReduxAction {\r\n  return { type: RESET_SCENARIO };\r\n}\r\n\r\nexport const RESET_SCENARIO_EXCEPT_PRIMARY_PIECE = 'RESET_SCENARIO_EXCEPT_PRIMARY_PIECE';\r\nexport interface ResetScenarioExceptPrimaryPieceAction {\r\n  type: typeof RESET_SCENARIO_EXCEPT_PRIMARY_PIECE;\r\n};\r\nexport function resetScenarioExceptPrimaryPiece(): ReduxAction {\r\n  return { type: RESET_SCENARIO_EXCEPT_PRIMARY_PIECE };\r\n}\r\n\r\nexport const SET_STATE = 'SET_STATE';\r\nexport interface SetStateAction {\r\n  type: typeof SET_STATE;\r\n  state: AppState;\r\n};\r\nexport function setState(state: AppState): ReduxAction {\r\n  return {\r\n    type: SET_STATE,\r\n    state,\r\n  };\r\n}\r\n\r\nexport const SET_GRID = 'SET_GRID';\r\nexport interface SetGridAction {\r\n  type: typeof SET_GRID;\r\n  grid: Grid;\r\n}\r\nexport function setGrid(grid: Grid): ReduxAction {\r\n  return {\r\n    type: SET_GRID,\r\n    grid,\r\n  };\r\n}\r\n\r\nexport const SET_PRIMARY_PIECE = 'SET_PRIMARY_PIECE';\r\nexport interface SetPrimaryPieceAction {\r\n  type: typeof SET_PRIMARY_PIECE;\r\n  piece: Piece | null;\r\n};\r\nexport function setPrimaryPiece(piece: Piece | null): ReduxAction {\r\n  return {\r\n    type: SET_PRIMARY_PIECE,\r\n    piece,\r\n  };\r\n}\r\n\r\nexport const SET_NEXT_PIECE = 'SET_NEXT_PIECE';\r\nexport interface SetNextPieceAction {\r\n  type: typeof SET_NEXT_PIECE;\r\n  piece: Piece | null;\r\n};\r\nexport function setNextPiece(piece: Piece | null): ReduxAction {\r\n  return {\r\n    type: SET_NEXT_PIECE,\r\n    piece,\r\n  };\r\n}\r\n\r\nexport const SET_PLAY_OPTIONS_OPTION = 'SET_PLAY_OPTIONS_OPTION';\r\nexport interface SetPlayOptionsOptionAction {\r\n  type: typeof SET_PLAY_OPTIONS_OPTION;\r\n  id: number | null;\r\n};\r\nexport function setPlayOptionsOption(id: number | null): ReduxAction {\r\n  return {\r\n    type: SET_PLAY_OPTIONS_OPTION,\r\n    id,\r\n  };\r\n}\r\n\r\nexport const INITIALIZE_PLAY_OPTIONS_STATE = 'INITIALIZE_PLAY_OPTIONS_STATE';\r\nexport interface InitializePlayOptionsStateAction {\r\n  type: typeof INITIALIZE_PLAY_OPTIONS_STATE;\r\n};\r\nexport function initializePlayOptionsState(): ReduxAction {\r\n  return { type: INITIALIZE_PLAY_OPTIONS_STATE };\r\n};\r\n\r\nexport const SET_PLAY_OPTIONS_OPTION_STATE = 'SET_PLAY_OPTIONS_OPTION_STATE';\r\nexport interface SetPlayOptionsOptionStateAction {\r\n  type: typeof SET_PLAY_OPTIONS_OPTION_STATE;\r\n  state: OptionState;\r\n};\r\nexport function setPlayOptionsOptionState(state: OptionState): ReduxAction {\r\n  return {\r\n    type: SET_PLAY_OPTIONS_OPTION_STATE,\r\n    state,\r\n  };\r\n};\r\n\r\nexport const SET_PLAY_OPTIONS_OPTION_GRID_AFTER_FIRST_PIECE = 'SET_PLAY_OPTIONS_OPTION_GRID_AFTER_FIRST_PIECE';\r\nexport interface SetPlayOptionsOptionGridAfterFirstPieceAction {\r\n  type: typeof SET_PLAY_OPTIONS_OPTION_GRID_AFTER_FIRST_PIECE;\r\n  grid: Grid;\r\n  gridBeforeClear: Grid;\r\n};\r\nexport function setPlayOptionsOptionGridAfterFirstPiece(grid: Grid, gridBeforeClear: Grid): ReduxAction {\r\n  return {\r\n    type: SET_PLAY_OPTIONS_OPTION_GRID_AFTER_FIRST_PIECE,\r\n    grid,\r\n    gridBeforeClear,\r\n  };\r\n};\r\n\r\nexport const SET_PLAY_OPTIONS_OPTION_GRID_AFTER_NEXT_PIECE = 'SET_PLAY_OPTIONS_OPTION_GRID_AFTER_NEXT_PIECE';\r\nexport interface SetPlayOptionsOptionGridAfterNextPieceAction {\r\n  type: typeof SET_PLAY_OPTIONS_OPTION_GRID_AFTER_NEXT_PIECE;\r\n  grid: Grid;\r\n  gridBeforeClear: Grid;\r\n};\r\nexport function setPlayOptionsOptionGridAfterNextPiece(grid: Grid, gridBeforeClear: Grid): ReduxAction {\r\n  return {\r\n    type: SET_PLAY_OPTIONS_OPTION_GRID_AFTER_NEXT_PIECE,\r\n    grid,\r\n    gridBeforeClear,\r\n  };\r\n};\r\n\r\nexport const SET_PLAY_OPTIONS_OPTION_POSSIBILITY = 'SET_PLAY_OPTIONS_OPTION_POSSIBILITY';\r\nexport interface SetPlayOptionsOptionPossibilityAction {\r\n  type: typeof SET_PLAY_OPTIONS_OPTION_POSSIBILITY;\r\n  piece: Piece;\r\n};\r\nexport function setPlayOptionsOptionPossibility(piece: Piece): ReduxAction {\r\n  return {\r\n    type: SET_PLAY_OPTIONS_OPTION_POSSIBILITY,\r\n    piece,\r\n  };\r\n};\r\n\r\nexport const SET_PLAY_OPTIONS_OPTION_GRID_AFTER_POSSIBILITY = 'SET_PLAY_OPTIONS_OPTION_GRID_AFTER_POSSIBILITY';\r\nexport interface SetPlayOptionsOptionGridAfterPossibilityAction {\r\n  type: typeof SET_PLAY_OPTIONS_OPTION_GRID_AFTER_POSSIBILITY;\r\n  piece: Piece;\r\n  grid: Grid;\r\n  gridBeforeClear: Grid;\r\n};\r\nexport function setPlayOptionsOptionGridAfterPossibility(piece: Piece, grid: Grid, gridBeforeClear: Grid): ReduxAction {\r\n  return {\r\n    type: SET_PLAY_OPTIONS_OPTION_GRID_AFTER_POSSIBILITY,\r\n    piece,\r\n    grid,\r\n    gridBeforeClear,\r\n  };\r\n};\r\n\r\nexport const ADD_PLAY_OPTIONS_OPTION = 'ADD_PLAY_OPTIONS_OPTION';\r\nexport interface AddPlayOptionsOptionAction {\r\n  type: typeof ADD_PLAY_OPTIONS_OPTION;\r\n};\r\nexport function addPlayOptionsOption(): ReduxAction {\r\n  return { type: ADD_PLAY_OPTIONS_OPTION };\r\n};\r\n\r\nexport const ADD_COMPARISON = 'ADD_COMPARISON';\r\nexport interface AddComparisonAction {\r\n  type: typeof ADD_COMPARISON;\r\n  firstOption: number;\r\n  secondOption: number;\r\n};\r\nexport function addComparison(firstOption: number, secondOption: number): ReduxAction {\r\n  return {\r\n    type: ADD_COMPARISON,\r\n    firstOption,\r\n    secondOption,\r\n  };\r\n};\r\n\r\nexport const SET_COMPARISON_ACTIVE_PIECE = 'SET_COMPARISON_ACTIVE_PIECE';\r\nexport interface SetComparisonActivePieceAction {\r\n  type: typeof SET_COMPARISON_ACTIVE_PIECE;\r\n  piece: Piece;\r\n};\r\nexport function setComparisonActivePiece(piece: Piece): ReduxAction {\r\n  return {\r\n    type: SET_COMPARISON_ACTIVE_PIECE,\r\n    piece,\r\n  };\r\n};\r\n\r\nexport const ADVANCE_COMPARISON_ACTIVE_PIECE = 'ADVANCE_COMPARISON_ACTIVE_PIECE';\r\nexport interface AdvanceComparisonActivePieceAction {\r\n  type: typeof ADVANCE_COMPARISON_ACTIVE_PIECE;\r\n};\r\nexport function advanceComparisonActivePiece(): ReduxAction {\r\n  return {\r\n    type: ADVANCE_COMPARISON_ACTIVE_PIECE,\r\n  };\r\n};\r\n\r\nexport const SET_ACTIVE_COMPARISON = 'SET_ACTIVE_COMPARISON';\r\nexport interface SetActiveComparisonAction {\r\n  type: typeof SET_ACTIVE_COMPARISON;\r\n  id: number;\r\n};\r\nexport function setActiveComparison(id: number): ReduxAction {\r\n  return {\r\n    type: SET_ACTIVE_COMPARISON,\r\n    id\r\n  };\r\n};\r\n\r\nexport const SET_COMPARISON_PIECE_CHOICE = 'SET_COMPARISON_PIECE_CHOICE';\r\nexport interface SetComparisonPieceChoiceAction {\r\n  type: typeof SET_COMPARISON_PIECE_CHOICE;\r\n  id: number | null;\r\n};\r\nexport function setComparisonPieceChoice(id: number | null): ReduxAction {\r\n  return {\r\n    type: SET_COMPARISON_PIECE_CHOICE,\r\n    id\r\n  };\r\n};\r\n\r\nexport const CLEAR_ALL_COMPARISONS = 'CLEAR_ALL_COMPARISONS';\r\nexport interface ClearAllComparisonAction {\r\n  type: typeof CLEAR_ALL_COMPARISONS;\r\n}\r\nexport function clearAllComparisons(): ReduxAction {\r\n  return {\r\n    type: CLEAR_ALL_COMPARISONS,\r\n  };\r\n}\r\n\r\nexport const CLEAR_COMPARISON = 'CLEAR_COMPARISON';\r\nexport interface ClearComparisonAction {\r\n  type: typeof CLEAR_COMPARISON;\r\n  id: number;\r\n};\r\nexport function clearComparison(id: number): ReduxAction {\r\n  return {\r\n    type: CLEAR_COMPARISON,\r\n    id\r\n  };\r\n};\r\n\r\nexport type ReduxAction = (\r\n  ResetScenarioAction |\r\n  ResetScenarioExceptPrimaryPieceAction |\r\n  SetStateAction |\r\n  SetGridAction |\r\n  SetPrimaryPieceAction |\r\n  SetNextPieceAction |\r\n  SetPlayOptionsOptionAction |\r\n  InitializePlayOptionsStateAction |\r\n  SetPlayOptionsOptionStateAction |\r\n  SetPlayOptionsOptionGridAfterFirstPieceAction |\r\n  SetPlayOptionsOptionGridAfterNextPieceAction |\r\n  SetPlayOptionsOptionPossibilityAction |\r\n  SetPlayOptionsOptionGridAfterPossibilityAction |\r\n  AddPlayOptionsOptionAction |\r\n  AddComparisonAction |\r\n  SetComparisonActivePieceAction |\r\n  SetActiveComparisonAction |\r\n  SetComparisonPieceChoiceAction |\r\n  AdvanceComparisonActivePieceAction |\r\n  ClearAllComparisonAction |\r\n  ClearComparisonAction\r\n);","import { Grid, Piece } from 'nes-tetris-representation/lib/piece-types';\r\n\r\nexport enum AppStateCategory {\r\n  SETUP,\r\n  OPTIONS,\r\n  COMPARE\r\n};\r\n\r\nexport enum AppState {\r\n  SETUP_GRID,\r\n  SETUP_ADD_HOLES,\r\n  SETUP_CHOOSE_PRIMARY_PIECE,\r\n  SETUP_CHOOSE_NEXT_PIECE,\r\n  OPTIONS_SUMMARIZE,\r\n  OPTIONS_PLACE_PRIMARY_PIECE,\r\n  OPTIONS_PLACE_NEXT_PIECE,\r\n  OPTIONS_PLACE_POSSIBILITY,\r\n  COMPARE,\r\n  COMPARE_ACTIVE,\r\n  COMPARE_COMPLETE,\r\n};\r\n\r\nexport enum OptionState {\r\n  UNSTARTED,\r\n  FIRST_PIECE,\r\n  NEXT_PIECE,\r\n  POSSIBILITIES,\r\n  DONE\r\n};\r\n\r\nexport interface Option {\r\n  id: number;\r\n  state: OptionState;\r\n  gridAfterFirstPiece: Grid | null;\r\n  gridAfterNextPiece: Grid | null;\r\n  gridAfterFirstPieceBeforeClear: Grid | null;\r\n  gridAfterNextPieceBeforeClear: Grid | null;\r\n  currentPossibility: Piece | null;\r\n  [Piece.I]: Grid | null;\r\n  [Piece.T]: Grid | null;\r\n  [Piece.O]: Grid | null;\r\n  [Piece.L]: Grid | null;\r\n  [Piece.J]: Grid | null;\r\n  [Piece.S]: Grid | null;\r\n  [Piece.Z]: Grid | null;\r\n}\r\n\r\nexport function getAppStateCategory(state: AppState): AppStateCategory {\r\n  switch(state) {\r\n    case AppState.SETUP_GRID:\r\n    case AppState.SETUP_ADD_HOLES:\r\n    case AppState.SETUP_CHOOSE_PRIMARY_PIECE:\r\n    case AppState.SETUP_CHOOSE_NEXT_PIECE:\r\n      return AppStateCategory.SETUP;\r\n    case AppState.OPTIONS_SUMMARIZE:\r\n    case AppState.OPTIONS_PLACE_PRIMARY_PIECE:\r\n    case AppState.OPTIONS_PLACE_NEXT_PIECE:\r\n    case AppState.OPTIONS_PLACE_POSSIBILITY:\r\n      return AppStateCategory.OPTIONS;\r\n    case AppState.COMPARE:\r\n    case AppState.COMPARE_ACTIVE:\r\n    case AppState.COMPARE_COMPLETE:\r\n      return AppStateCategory.COMPARE;\r\n  }\r\n};\r\n\r\nexport interface Comparison {\r\n  id: number;\r\n  firstOption: Option;\r\n  secondOption: Option;\r\n  activePiece: Piece | null;\r\n  [Piece.I]: number | null;\r\n  [Piece.T]: number | null;\r\n  [Piece.O]: number | null;\r\n  [Piece.L]: number | null;\r\n  [Piece.J]: number | null;\r\n  [Piece.S]: number | null;\r\n  [Piece.Z]: number | null;\r\n}","import { Grid, Piece, PieceList } from 'nes-tetris-representation/lib/piece-types';\r\nimport {\r\n  ReduxAction,\r\n  SET_STATE,\r\n  SET_GRID,\r\n  SET_PRIMARY_PIECE,\r\n  SET_NEXT_PIECE,\r\n  SET_PLAY_OPTIONS_OPTION,\r\n  INITIALIZE_PLAY_OPTIONS_STATE,\r\n  SET_PLAY_OPTIONS_OPTION_STATE,\r\n  SET_PLAY_OPTIONS_OPTION_GRID_AFTER_FIRST_PIECE,\r\n  SET_PLAY_OPTIONS_OPTION_GRID_AFTER_NEXT_PIECE,\r\n  SET_PLAY_OPTIONS_OPTION_POSSIBILITY,\r\n  SET_PLAY_OPTIONS_OPTION_GRID_AFTER_POSSIBILITY,\r\n  ADD_PLAY_OPTIONS_OPTION,\r\n  ADD_COMPARISON,\r\n  SET_COMPARISON_ACTIVE_PIECE,\r\n  SET_ACTIVE_COMPARISON,\r\n  SET_COMPARISON_PIECE_CHOICE,\r\n  ADVANCE_COMPARISON_ACTIVE_PIECE,\r\n  RESET_SCENARIO,\r\n  RESET_SCENARIO_EXCEPT_PRIMARY_PIECE,\r\n  CLEAR_COMPARISON,\r\n}\r\nfrom './actions';\r\nimport { AppState, Option, OptionState, Comparison } from './types';\r\n\r\nexport interface RootState {\r\n  state: AppState,\r\n  grid: Grid,\r\n  primaryPiece: Piece | null,\r\n  nextPiece: Piece | null,\r\n  activeOptionId: number | null,\r\n  options: Option[],\r\n  activeComparisonId: number | null,\r\n  comparisons: Comparison[],\r\n};\r\n\r\nvar grid: number[][] = [];\r\nfor (var i = 0; i < 22; i++) {\r\n  const row: number[] = [];\r\n  for (var j = 0; j < 10; j++) {\r\n    row.push(0);\r\n  }\r\n  grid.push(row);\r\n}\r\n\r\nexport const DefaultState: RootState = {\r\n  state: AppState.SETUP_GRID,\r\n  grid: grid as Grid,\r\n  primaryPiece: null,\r\n  nextPiece: null,\r\n  activeOptionId: null,\r\n  options: [],\r\n  activeComparisonId: null,\r\n  comparisons: [],\r\n};\r\n\r\nfunction changeOption(\r\n  state: RootState,\r\n  affectOption: (option: Option) => Option\r\n): Option[] {\r\n  const existingOptionIndex = state.options.findIndex(option => option.id === state.activeOptionId);\r\n\r\n  if (existingOptionIndex !== -1) {\r\n    const existingOption = state.options[existingOptionIndex];\r\n    const x = Object.assign(\r\n      [],\r\n      state.options,\r\n      { [existingOptionIndex]: affectOption(existingOption) }\r\n    );\r\n    return x;\r\n  }\r\n\r\n  throw new Error('Trying to set primary piece on non-existent option');\r\n}\r\n\r\nconst getNewOption = (id: number): Option => ({\r\n  id,\r\n  state: OptionState.UNSTARTED,\r\n  gridAfterFirstPiece: null,\r\n  gridAfterNextPiece: null,\r\n  gridAfterFirstPieceBeforeClear: null,\r\n  gridAfterNextPieceBeforeClear: null,\r\n  currentPossibility: null,\r\n  [Piece.I]: null,\r\n  [Piece.T]: null,\r\n  [Piece.O]: null,\r\n  [Piece.L]: null,\r\n  [Piece.J]: null,\r\n  [Piece.S]: null,\r\n  [Piece.Z]: null,\r\n});\r\n\r\nconst getNewComparison = (id: number, firstOption: Option, secondOption: Option): Comparison => ({\r\n  id,\r\n  firstOption,\r\n  secondOption,\r\n  activePiece: null,\r\n  [Piece.I]: null,\r\n  [Piece.T]: null,\r\n  [Piece.O]: null,\r\n  [Piece.L]: null,\r\n  [Piece.J]: null,\r\n  [Piece.S]: null,\r\n  [Piece.Z]: null,\r\n});\r\n\r\nconst appReducer = (state = DefaultState, action: ReduxAction) => {\r\n  switch (action.type) {\r\n    case RESET_SCENARIO:\r\n      return Object.assign({}, state, {\r\n        primaryPiece: null,\r\n        nextPiece: null,\r\n        activeOptionId: null,\r\n        options: [],\r\n        activeComparisonId: null,\r\n        comparisons: [],\r\n      });\r\n    case RESET_SCENARIO_EXCEPT_PRIMARY_PIECE:\r\n      return Object.assign({}, state, {\r\n        nextPiece: null,\r\n        activeOptionId: null,\r\n        options: [],\r\n        activeComparisonId: null,\r\n        comparisons: [],\r\n      });\r\n    case SET_STATE:\r\n      return Object.assign({}, state, { state: action.state });\r\n    case SET_GRID:\r\n      return Object.assign({}, state, { grid: action.grid });\r\n    case SET_PRIMARY_PIECE:\r\n      return Object.assign({}, state, { primaryPiece: action.piece });\r\n    case SET_NEXT_PIECE:\r\n      return Object.assign({}, state, { nextPiece: action.piece });\r\n    case SET_PLAY_OPTIONS_OPTION:\r\n      return Object.assign({}, state, { activeOptionId: action.id });\r\n    case INITIALIZE_PLAY_OPTIONS_STATE:\r\n      return Object.assign({}, state, { options: [getNewOption(0)], activeOptionId: 0 });\r\n    case SET_PLAY_OPTIONS_OPTION_STATE:\r\n      if (state.activeOptionId === null) {\r\n        throw new Error('Cannot change option state when there is no active option');\r\n      }\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          options: changeOption(\r\n            state,\r\n            (option: Option) => Object.assign({}, option, { state: action.state })\r\n          ),\r\n        },\r\n      );\r\n    case SET_PLAY_OPTIONS_OPTION_GRID_AFTER_FIRST_PIECE:\r\n      if (state.activeOptionId === null) {\r\n        throw new Error('Cannot change option state when there is no active option');\r\n      }\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          options: changeOption(\r\n            state,\r\n            (option: Option) => Object.assign({}, option, {\r\n              gridAfterFirstPiece: action.grid,\r\n              gridAfterFirstPieceBeforeClear: action.gridBeforeClear,\r\n              gridAfterNextPiece: null,\r\n              [Piece.I]: null,\r\n              [Piece.T]: null,\r\n              [Piece.O]: null,\r\n              [Piece.L]: null,\r\n              [Piece.J]: null,\r\n              [Piece.S]: null,\r\n              [Piece.Z]: null,\r\n            }),\r\n          ),\r\n        },\r\n      );\r\n    case SET_PLAY_OPTIONS_OPTION_GRID_AFTER_NEXT_PIECE:\r\n      if (state.activeOptionId === null) {\r\n        throw new Error('Cannot change option state when there is no active option');\r\n      }\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          options: changeOption(\r\n            state,\r\n            (option: Option) => Object.assign({}, option, {\r\n              gridAfterNextPiece: action.grid,\r\n              gridAfterNextPieceBeforeClear: action.gridBeforeClear,\r\n              [Piece.I]: null,\r\n              [Piece.T]: null,\r\n              [Piece.O]: null,\r\n              [Piece.L]: null,\r\n              [Piece.J]: null,\r\n              [Piece.S]: null,\r\n              [Piece.Z]: null,\r\n            }),\r\n          ),\r\n        },\r\n      );\r\n    case SET_PLAY_OPTIONS_OPTION_POSSIBILITY:\r\n      if (state.activeOptionId === null) {\r\n        throw new Error('Cannot change option state when there is no active option');\r\n      }\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          options: changeOption(\r\n            state,\r\n            (option: Option) => Object.assign({}, option, { currentPossibility: action.piece }),\r\n          ),\r\n        },\r\n      );\r\n    case SET_PLAY_OPTIONS_OPTION_GRID_AFTER_POSSIBILITY:\r\n      if (state.activeOptionId === null) {\r\n        throw new Error('Cannot change option state when there is no active option');\r\n      }\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          options: changeOption(\r\n            state,\r\n            (option: Option) => Object.assign({}, option, { [action.piece]: action.gridBeforeClear }),\r\n          ),\r\n        },\r\n      );\r\n    case ADD_PLAY_OPTIONS_OPTION:\r\n      const newId = Math.max(...state.options.map(o => o.id)) + 1;\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          options: [...state.options, getNewOption(newId)],\r\n          activeOptionId: newId,\r\n        },\r\n      );\r\n    case ADD_COMPARISON:\r\n      const firstOption = state.options.find(option => option.id === action.firstOption);\r\n      const secondOption = state.options.find(option => option.id === action.secondOption);\r\n      const newComparisonId = Math.max(0, ...state.comparisons.map(comparison => comparison.id)) + 1;\r\n\r\n      if (firstOption === undefined || secondOption === undefined) {\r\n        return state;\r\n      }\r\n\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          activeComparisonId: newComparisonId,\r\n          comparisons: [...state.comparisons, getNewComparison(newComparisonId, firstOption, secondOption)]\r\n        }\r\n      )\r\n    case SET_COMPARISON_ACTIVE_PIECE:\r\n      const comparison = state.comparisons.find(comparison => comparison.id === state.activeComparisonId);\r\n      if (comparison === undefined) {\r\n        return state;\r\n      }\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          comparisons: [\r\n            Object.assign({}, comparison, { activePiece: action.piece }),\r\n            ...state.comparisons.filter(c => c.id !== comparison.id)\r\n          ],\r\n        }\r\n      )\r\n    case ADVANCE_COMPARISON_ACTIVE_PIECE:\r\n      const advanceComparison = state.comparisons.find(comparison => comparison.id === state.activeComparisonId);\r\n      if (advanceComparison === undefined) {\r\n        return state;\r\n      }\r\n\r\n      if (advanceComparison.activePiece === Piece.Z) {\r\n        return Object.assign({}, state, { state: AppState.COMPARE_COMPLETE });\r\n      }\r\n\r\n      const activePiece = advanceComparison.activePiece === null\r\n        ? Piece.I as Piece\r\n        : PieceList[(PieceList.findIndex(p => p.value === advanceComparison.activePiece) + PieceList.length + 1) % PieceList.length].value;\r\n\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          comparisons: [\r\n            Object.assign({}, advanceComparison, { activePiece }),\r\n            ...state.comparisons.filter(c => c.id !== advanceComparison.id)\r\n          ],\r\n        }\r\n      )\r\n    case SET_ACTIVE_COMPARISON:\r\n      return Object.assign({}, state, { activeComparisonId: action.id });\r\n    case SET_COMPARISON_PIECE_CHOICE:\r\n      const thisComparison = state.comparisons.find(comparison => comparison.id === state.activeComparisonId);\r\n      if (thisComparison === undefined || thisComparison.activePiece === null) {\r\n        return state;\r\n      }\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          comparisons: [\r\n            Object.assign({}, thisComparison, { [thisComparison.activePiece]: action.id }),\r\n            ...state.comparisons.filter(c => c.id !== thisComparison.id)\r\n          ],\r\n        }\r\n      )\r\n    case CLEAR_COMPARISON:\r\n      const clearComparison = state.comparisons.find(comparison => comparison.id === action.id);\r\n      if (clearComparison === undefined) {\r\n        return state;\r\n      }\r\n\r\n      return Object.assign(\r\n        {},\r\n        state,\r\n        {\r\n          comparisons: [\r\n            Object.assign({}, clearComparison, {\r\n              activePiece:  null,\r\n              [Piece.I]: null,\r\n              [Piece.T]: null,\r\n              [Piece.O]: null,\r\n              [Piece.L]: null,\r\n              [Piece.J]: null,\r\n              [Piece.S]: null,\r\n              [Piece.Z]: null,\r\n            }),\r\n            ...state.comparisons.filter(c => c.id !== clearComparison.id)\r\n          ],\r\n        }\r\n      )\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default appReducer;","import React from 'react';\r\nimport { Dispatch } from 'redux';\r\nimport { Stepper, Step, StepContent, StepLabel } from '@material-ui/core';\r\nimport '../style/App.css';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../store';\r\nimport { AppState } from '../store/types';\r\nimport { setState, initializePlayOptionsState } from '../store/actions';\r\nimport { Piece } from 'nes-tetris-representation/lib/piece-types';\r\n\r\ninterface AppProps {\r\n  state: AppState;\r\n  currentPiece: Piece | null,\r\n  nextPiece: Piece | null,\r\n  setAppState: (state: AppState) => void;\r\n  moveToPlayOptions: () => void;\r\n};\r\n\r\nclass SetupStepper extends React.Component<AppProps> {\r\n  render() {\r\n    return (\r\n      <Stepper className=\"instructions\" activeStep={this.props.state} orientation=\"vertical\">\r\n        <Step key={AppState.SETUP_GRID}>\r\n          <StepLabel>Set up the stack</StepLabel>\r\n          <StepContent>\r\n            <div>Click each column to match the stack that you want to analyze. Don't worry, there will be chance to add gaps next. Press Space when you're done</div>\r\n          </StepContent>\r\n        </Step>\r\n        <Step key={AppState.SETUP_ADD_HOLES}>\r\n          <StepLabel>Toggle individual blocks</StepLabel>\r\n          <StepContent>\r\n            <div>Click each block that you want to add/remove. Press Space when you're done</div>\r\n          </StepContent>\r\n        </Step>\r\n        <Step key={AppState.SETUP_CHOOSE_PRIMARY_PIECE}>\r\n          <StepLabel>Select playable piece</StepLabel>\r\n          <StepContent>\r\n            <div>Choose the piece you first have to place. Press Space when you're done</div>\r\n          </StepContent>\r\n        </Step>\r\n        <Step key={AppState.SETUP_CHOOSE_NEXT_PIECE}>\r\n          <StepLabel>Select next piece</StepLabel>\r\n          <StepContent>\r\n            <div>Choose the next piece you have to place. Press Space when you're done</div>\r\n          </StepContent>\r\n        </Step>\r\n      </Stepper>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  state: state.state,\r\n  currentPiece: state.primaryPiece,\r\n  nextPiece: state.nextPiece,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  setAppState: (state: AppState) => dispatch(setState(state)),\r\n  moveToPlayOptions: () => {\r\n    dispatch(initializePlayOptionsState());\r\n    dispatch(setState(AppState.OPTIONS_SUMMARIZE));\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SetupStepper);\r\n","import { Grid } from \"nes-tetris-representation/lib/piece-types\";\r\n\r\nconst filledGrid: Grid = [\r\n  [2, 2, 2, 2, 3, 2, 2, 2, 2, 2],\r\n  [2, 2, 2, 3, 3, 3, 3, 1, 1, 2],\r\n  [3, 3, 3, 3, 3, 3, 3, 1, 1, 1],\r\n  [3, 3, 3, 3, 1, 1, 2, 1, 3, 3],\r\n  [3, 2, 3, 3, 1, 1, 2, 2, 3, 3],\r\n  [2, 2, 2, 2, 1, 2, 2, 2, 2, 2],\r\n  [2, 2, 2, 3, 3, 3, 3, 1, 1, 2],\r\n  [3, 3, 3, 3, 3, 3, 2, 2, 1, 1],\r\n  [3, 3, 1, 3, 3, 2, 2, 1, 1, 1],\r\n  [3, 1, 1, 3, 3, 1, 2, 1, 3, 3],\r\n  [3, 1, 2, 2, 1, 1, 2, 2, 3, 3],\r\n  [3, 2, 2, 3, 1, 2, 2, 2, 2, 2],\r\n  [3, 2, 3, 3, 3, 2, 3, 3, 3, 3],\r\n  [2, 2, 2, 2, 3, 2, 2, 2, 2, 2],\r\n  [2, 2, 2, 3, 3, 3, 2, 3, 3, 2],\r\n  [1, 1, 1, 3, 3, 3, 3, 3, 3, 3],\r\n  [1, 3, 3, 1, 1, 1, 3, 3, 3, 3],\r\n  [2, 3, 3, 1, 3, 1, 1, 3, 1, 3],\r\n  [2, 2, 2, 3, 3, 3, 1, 1, 1, 3],\r\n  [3, 3, 3, 3, 3, 3, 3, 2, 1, 1],\r\n  [2, 3, 1, 1, 3, 3, 3, 2, 2, 2],\r\n  [2, 2, 2, 1, 1, 3, 3, 3, 3, 3],\r\n]\r\n\r\nexport default filledGrid;","import React, { MouseEvent } from 'react';\r\nimport classnames from 'classnames';\r\nimport '../style/Block.css';\r\nimport filledGrid from './filled-grid';\r\n\r\nexport interface BlockProps {\r\n  row: number;\r\n  column: number;\r\n  value: number;\r\n  width?: string;\r\n  disabled?: boolean;\r\n  nearInvisible?: boolean;\r\n  slightlyHidden?: boolean;\r\n  showDiff?: boolean;\r\n  onMouseEnter?: (event: MouseEvent) => void;\r\n  onClick?: (event: MouseEvent) => void;\r\n}\r\nfunction Block({ value, nearInvisible, slightlyHidden, showDiff, row, column, onMouseEnter, onClick, disabled, width }: BlockProps) {\r\n  const adjustedValue = slightlyHidden ? filledGrid[row][column] : value;\r\n  return (\r\n    <div\r\n      key={column}\r\n      draggable=\"true\"\r\n      style={{ width }}\r\n      onMouseEnter={onMouseEnter}\r\n      onMouseDown={disabled ? () => {} : onClick}\r\n      className={classnames({\r\n        block: true,\r\n        hidden: !nearInvisible && !slightlyHidden && !value,\r\n        [`block-${adjustedValue}`]: true,\r\n        'near-invisible': nearInvisible,\r\n        'slightly-hidden': slightlyHidden || disabled,\r\n        'show-diff': showDiff,\r\n      })}\r\n      onDragEnter={onClick}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Block;\r\n","import { Grid } from 'nes-tetris-representation/lib/piece-types';\r\nimport React from 'react';\r\nimport '../style/Block.css';\r\nimport Block, { BlockProps } from './block';\r\n\r\ntype GetBlockFunction = (row: number, column: number, value: number) => Partial<BlockProps>;\r\n\r\ninterface TetrisGridProps {\r\n  grid: Grid;\r\n  beforeGrid?: Grid | null;\r\n  getBlockProps?: GetBlockFunction;\r\n  blockSizeInRem?: number;\r\n  onClick?: () => void;\r\n  onMouseLeave?: () => void;\r\n  className?: string;\r\n  hideTopTwoRows?: boolean;\r\n}\r\n\r\nfunction getRow(row: number, blocks: number[], beforeBlocks: number[] | null, blockSizeInRem: number, getBlockProps: GetBlockFunction | undefined) {\r\n  const width = blocks.length ? `${100 / blocks.length}%` : 'auto';\r\n  return (\r\n    <div className=\"row\" key={row} style={{ height: `${blockSizeInRem}rem` }}>\r\n      {\r\n        blocks.map((block, blockIndex) =>\r\n          <Block\r\n            key={row * 20 + blockIndex}\r\n            row={row}\r\n            column={blockIndex}\r\n            value={block}\r\n            width={width}\r\n            showDiff={!!beforeBlocks && !!block && !beforeBlocks[blockIndex]}\r\n            {...(getBlockProps === undefined ? undefined : getBlockProps(row, blockIndex, block))}\r\n          />)\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction TetrisGrid({ grid, beforeGrid = null, blockSizeInRem = 2, onClick, onMouseLeave, getBlockProps, hideTopTwoRows = true, className }: TetrisGridProps) {\r\n  const numberOfRows = grid.length - (hideTopTwoRows ? 2 : 0);\r\n  const numberOfColumns = Math.max(...grid.map(row => row.length));\r\n  const width = blockSizeInRem * numberOfColumns;\r\n  const height = blockSizeInRem * numberOfRows;\r\n  return (\r\n    <div style={{ height: `${height}rem`, width: `${width}rem`, margin: 'auto' }} onClick={onClick} onMouseLeave={onMouseLeave} className={className}>\r\n      {\r\n        grid.map((row, rowKey) => {\r\n          return hideTopTwoRows && rowKey < 2\r\n            ? null\r\n            : getRow(rowKey, row, beforeGrid ? beforeGrid[rowKey] : null, blockSizeInRem, getBlockProps)\r\n        })\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TetrisGrid;","import React from 'react';\r\nimport { Dispatch } from 'redux';\r\nimport classnames from 'classnames';\r\nimport { Stepper, Step, StepContent, StepLabel, Grid } from '@material-ui/core';\r\nimport '../style/App.css';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../store';\r\nimport { AppState, OptionState, Option } from '../store/types';\r\nimport { setState, setPlayOptionsOptionPossibility, setPlayOptionsOptionState, setPlayOptionsOption } from '../store/actions';\r\nimport { Piece, PieceList, Grid as GridType } from 'nes-tetris-representation/lib/piece-types';\r\nimport TetrisGrid from '../reusable/tetris-grid';\r\nimport { getPieceGrid } from 'nes-tetris-representation/lib/move-piece';\r\n\r\ninterface OptionStepperProps {\r\n  state: AppState;\r\n  option: Option | null;\r\n  possibilityGrid: PossibilityGrid;\r\n  setAppState: (state: AppState) => void;\r\n  setActivePieceId: (piece: Piece) => void;\r\n  completeOption: () => void;\r\n};\r\n\r\ntype PossibilityGrid = {\r\n  [Piece.I]: null | GridType,\r\n  [Piece.T]: null | GridType,\r\n  [Piece.O]: null | GridType,\r\n  [Piece.J]: null | GridType,\r\n  [Piece.L]: null | GridType,\r\n  [Piece.Z]: null | GridType,\r\n  [Piece.S]: null | GridType,\r\n};\r\n\r\nclass OptionStepper extends React.Component<OptionStepperProps> {\r\n  render() {\r\n    if (this.props.state === AppState.OPTIONS_SUMMARIZE) {\r\n      return <div className=\"instructions\">\r\n        <p>You've set up the scenario you want to analyze.</p>\r\n        <p>Each option allows us to explore another possible scenario. Each option should be a different placement of the current and next pieces, and then you will go through all of the possible pieces that come after that.</p>\r\n        <p>When you have two or more options, you can select two of them to compare the different resulting stacks. This will allow you to choose the best option for every scenario in a game given all of the available information.</p>\r\n      </div>\r\n    }\r\n\r\n    if (this.props.option === null) {\r\n      return null;\r\n    }\r\n\r\n    // Return -5 cos it needs to start from 0 cos... life.\r\n    return (\r\n      <Stepper className=\"instructions\" activeStep={this.props.state - 5} orientation=\"vertical\">\r\n        <Step key={AppState.OPTIONS_PLACE_PRIMARY_PIECE}>\r\n          <StepLabel>Option { this.props.option.id + 1 }: Place first piece</StepLabel>\r\n          <StepContent>Put your first piece in what you think is the best position. Use the arrow keys to navigate, A/S to rotate, D to hard drop, and Space to lock it in place.</StepContent>\r\n        </Step>\r\n        <Step key={AppState.OPTIONS_PLACE_NEXT_PIECE}>\r\n          <StepLabel>Option { this.props.option.id + 1 }: Place next piece</StepLabel>\r\n          <StepContent>Place your next piece in what you think is the best position. Use the arrow keys to navigate, A/S to rotate, , D to hard drop, and Space to lock it in place.</StepContent>\r\n        </Step>\r\n        <Step key={AppState.OPTIONS_PLACE_POSSIBILITY}>\r\n          <StepLabel>Option { this.props.option.id + 1 }: Place all possible next pieces</StepLabel>\r\n          <StepContent>\r\n            <div style={{ marginBottom: '1rem' }}>Use the arrow keys to navigate, A/S to rotate, , D to hard drop, and Space to lock it in place.</div>\r\n            <Grid container justify=\"center\">\r\n              {\r\n                PieceList.map(({ value }: { value: Piece }) => (\r\n                  <Grid item key={value} xs={3}>\r\n                    <TetrisGrid\r\n                      onClick={() => this.props.setActivePieceId(value)}\r\n                      grid={getPieceGrid(value)}\r\n                      blockSizeInRem={0.5}\r\n                      hideTopTwoRows={false}\r\n                      className={classnames({ 'option-step-piece': true, 'grid-disabled': this.props.possibilityGrid[value] })}\r\n                    />\r\n                  </Grid>\r\n                ))\r\n              }\r\n            </Grid>\r\n          </StepContent>\r\n        </Step>\r\n      </Stepper>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  const option = state.activeOptionId === null ? null : state.options[state.activeOptionId];\r\n  const grid: PossibilityGrid = PieceList.reduce((gridSoFar, { value: currentValue }) => {\r\n    return Object.assign({}, gridSoFar, { [currentValue]: option && option[currentValue] });\r\n  }, {} as PossibilityGrid);\r\n  return {\r\n    state: state.state,\r\n    possibilityGrid: grid,\r\n    option,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  setAppState: (state: AppState) => dispatch(setState(state)),\r\n  setActivePieceId: (piece: Piece) => dispatch(setPlayOptionsOptionPossibility(piece)),\r\n  completeOption: () => {\r\n    dispatch(setPlayOptionsOptionState(OptionState.DONE));\r\n    dispatch(setPlayOptionsOption(null));\r\n    dispatch(setState(AppState.OPTIONS_SUMMARIZE));\r\n  }\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OptionStepper);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classnames from 'classnames';\r\nimport '../style/App.css';\r\nimport TetrisGrid from '../reusable/tetris-grid';\r\nimport { Grid } from '@material-ui/core';\r\nimport { RootState } from '../store';\r\nimport { AppState } from '../store/types';\r\nimport { Piece, PieceList } from 'nes-tetris-representation/lib/piece-types';\r\nimport { getPieceGrid } from 'nes-tetris-representation/lib/move-piece';\r\n\r\ninterface CompareStepperProps {\r\n  activePiece: Piece | null;\r\n  comparisonFinished: boolean;\r\n};\r\n\r\nclass CompareStepper extends React.Component<CompareStepperProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"instructions\">\r\n        <p>\r\n          Now we need to evaluate which is the preferable stack after each placement.\r\n        </p>\r\n        <p>\r\n          If we can compare each of the resulting stacks, and decide which we would prefer, we are able to calculate which option for primary and next piece is best, and so which action you should take.\r\n        </p>\r\n        <p>\r\n          Click the option which has the stack that you would prefer. Do note that a stack can look worse, but you could have gained a tetris from it, which would make it more valuable.\r\n        </p>\r\n        <Grid container justify=\"center\">\r\n          {\r\n            PieceList.map(({ value }: { value: Piece }, index: number) => (\r\n              <Grid key={value} item xs={3}>\r\n                <TetrisGrid\r\n                  grid={getPieceGrid(value)}\r\n                  blockSizeInRem={0.5}\r\n                  hideTopTwoRows={false}\r\n                  className={classnames({\r\n                    'option-step-piece': true,\r\n                    'grid-disabled': (this.props.activePiece !== null && index < this.props.activePiece) || this.props.comparisonFinished\r\n                  })}\r\n                />\r\n              </Grid>\r\n            ))\r\n          }\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  const comparisonId = state.activeComparisonId!;\r\n  const comparison = state.comparisons.find(c => c.id === comparisonId);\r\n\r\n  if (!comparison) {\r\n    throw new Error('unknownComparison');\r\n  }\r\n\r\n  return {\r\n    activePiece: comparison.activePiece,\r\n    comparisonFinished: state.state === AppState.COMPARE_COMPLETE,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(CompareStepper);\r\n","import React from 'react';\r\nimport '../style/App.css';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../store';\r\nimport { AppStateCategory, getAppStateCategory } from '../store/types';\r\nimport SetupStepper from '../setup-components/SetupStepper';\r\nimport OptionStepper from '../option-components/OptionStepper';\r\nimport CompareStepper from '../compare-components/CompareStepper';\r\n\r\ninterface AppProps {\r\n  category: AppStateCategory;\r\n};\r\n\r\nfunction getStepper(category: AppStateCategory): JSX.Element {\r\n  switch (category) {\r\n    case AppStateCategory.SETUP:\r\n      return <SetupStepper />;\r\n    case AppStateCategory.OPTIONS:\r\n      return <OptionStepper />;\r\n    case AppStateCategory.COMPARE:\r\n      return <CompareStepper />;\r\n    default:\r\n      return <></>;\r\n  }\r\n}\r\n\r\nclass LocalStepper extends React.Component<AppProps> {\r\n  render() {\r\n    return getStepper(this.props.category);\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({ category: getAppStateCategory(state.state) });\r\n\r\nexport default connect(mapStateToProps)(LocalStepper);\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport '../style/App.css';\r\nimport filledGrid from '../reusable/filled-grid';\r\nimport TetrisGrid from '../reusable/tetris-grid';\r\nimport { BlockProps } from '../reusable/block';\r\nimport { Grid } from 'nes-tetris-representation/lib/piece-types';\r\nimport PasteHandler from 'nes-tetris-representation/lib/paste-handler';\r\n\r\ninterface FillPlayfieldProps {\r\n  grid: Grid;\r\n  setGrid: (grid: Grid) => void;\r\n};\r\n\r\ninterface ComponentState {\r\n  hoverBlock: { row: number, column: number } | null,\r\n  pasteHandler: PasteHandler | null,\r\n};\r\n\r\nclass FillPlayfield extends React.Component<FillPlayfieldProps, ComponentState> {\r\n  constructor(props: FillPlayfieldProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      hoverBlock: null,\r\n      pasteHandler: null,\r\n    };\r\n\r\n    this.setHoverBlock = this.setHoverBlock.bind(this);\r\n    this.clickBlock = this.clickBlock.bind(this);\r\n    this.getBlockProps = this.getBlockProps.bind(this);\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    const pasteHandler = new PasteHandler('paste-area', 'pasted-image', 'dummy-canvas');\r\n    const callback = (board: Grid) => this.props.setGrid(board);\r\n    pasteHandler.setUpPasteability(callback);\r\n\r\n    this.setState({ pasteHandler });\r\n  }\r\n\r\n  setHoverBlock(row: number, column: number): void {\r\n    this.setState({ hoverBlock: { row, column } });\r\n  }\r\n\r\n  clickBlock(row: number, column: number): void {\r\n    const grid = _.cloneDeep(this.props.grid);\r\n\r\n    for (var i = 0; i < 22; i++) {\r\n      if (i >= row) {\r\n        grid[i][column] = filledGrid[i][column];\r\n      } else {\r\n        grid[i][column] = 0;\r\n      }\r\n    }\r\n\r\n    this.setState({ hoverBlock: null });\r\n    this.props.setGrid(grid);\r\n  }\r\n\r\n  getBlockProps(row: number, column: number, value: number): Partial<BlockProps> {\r\n    const { hoverBlock } = this.state;\r\n    const slightlyHidden = !!hoverBlock && row >= hoverBlock.row && column === hoverBlock.column;\r\n    const nearInvisible = !!hoverBlock && row < hoverBlock.row && column === hoverBlock.column;\r\n    return {\r\n      slightlyHidden,\r\n      nearInvisible,\r\n      onMouseEnter: () => this.setHoverBlock(row, column),\r\n      onClick: () => this.clickBlock(row, column)\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return <>\r\n      <input className=\"paste-box\" id=\"paste-area\" placeholder=\"Paste screenshot here\" />\r\n      <img id=\"pasted-image\" style={{ display: 'none' }} />\r\n      <canvas id=\"dummy-canvas\" style={{ display: 'none' }} />\r\n      <TetrisGrid\r\n        grid={this.props.grid}\r\n        getBlockProps={this.getBlockProps}\r\n        onMouseLeave={() => this.setState({ hoverBlock: null })}\r\n      />\r\n    </>;\r\n  }\r\n}\r\n\r\nexport default FillPlayfield;\r\n","import React, { ComponentState } from 'react';\r\nimport _ from 'lodash';\r\nimport '../style/App.css';\r\nimport { BlockProps } from '../reusable/block';\r\nimport TetrisGrid from '../reusable/tetris-grid';\r\nimport filledGrid from '../reusable/filled-grid';\r\nimport { Grid } from 'nes-tetris-representation/lib/piece-types';\r\n\r\ninterface AddHolesProps {\r\n  grid: Grid;\r\n  setGrid: (grid: Grid) => void;\r\n};\r\n\r\nclass AddHoles extends React.Component<AddHolesProps, ComponentState> {\r\n  constructor(props: AddHolesProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      hoverBlock: null\r\n    };\r\n\r\n    this.setHoverBlock = this.setHoverBlock.bind(this);\r\n    this.clickBlock = this.clickBlock.bind(this);\r\n    this.getBlockProps = this.getBlockProps.bind(this);\r\n  }\r\n\r\n  setHoverBlock(row: number, column: number): void {\r\n    this.setState({ hoverBlock: { row, column } });\r\n  }\r\n\r\n  clickBlock(row: number, column: number): void {\r\n    const grid = _.cloneDeep(this.props.grid);\r\n\r\n    if (grid[row][column] === 0) {\r\n      grid[row][column] = filledGrid[row][column];\r\n    } else {\r\n      grid[row][column] = 0;\r\n    }\r\n\r\n    this.setState({ hoverBlock: null });\r\n    this.props.setGrid(grid);\r\n  }\r\n\r\n  getBlockProps(row: number, column: number, value: number): Partial<BlockProps> {\r\n    const { hoverBlock } = this.state;\r\n    return {\r\n      slightlyHidden: !!hoverBlock && hoverBlock.row === row && hoverBlock.column === column && !!this.props.grid[row][column],\r\n      onMouseEnter: () => this.setHoverBlock(row, column),\r\n      onClick: () => this.clickBlock(row, column),\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <TetrisGrid grid={this.props.grid} getBlockProps={this.getBlockProps} />;\r\n  }\r\n}\r\n\r\nexport default AddHoles;","import { Piece, PieceList } from 'nes-tetris-representation/lib/piece-types';\r\n\r\nconst numpadMap: { [key: string]: Piece } = {\r\n  Numpad5: Piece.I,\r\n  Numpad4: Piece.O,\r\n  Numpad6: Piece.T,\r\n  Numpad7: Piece.L,\r\n  Numpad9: Piece.J,\r\n  Numpad1: Piece.S,\r\n  Numpad3: Piece.Z,\r\n};\r\n\r\nexport default function inputHandler(\r\n  event: KeyboardEvent,\r\n  disabled?: boolean,\r\n): null | Piece {\r\n  if (disabled) {\r\n    return null;\r\n  }\r\n\r\n  if (event.code.startsWith('Numpad')) {\r\n    const piece = numpadMap[event.code];\r\n\r\n    if (piece !== undefined) {\r\n      event.preventDefault();\r\n      return piece;\r\n    }\r\n  }\r\n\r\n  if (event.code.startsWith('Key')) {\r\n    const pieceKey = event.code.substring(3, 4);\r\n\r\n    for (let i = 0; i < PieceList.length; i++) {\r\n      const { value, label } = PieceList[i];\r\n\r\n      if (label === pieceKey) {\r\n        return value;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (event.code.startsWith('Digit')) {\r\n    const digit = event.code.substring(5, 6);\r\n    const index = parseInt(digit, 10) - 1;\r\n\r\n    if (index <= 7) {\r\n      return [\r\n        Piece.L,\r\n        Piece.J,\r\n        Piece.Z,\r\n        Piece.S,\r\n        Piece.O,\r\n        Piece.T,\r\n        Piece.I\r\n      ][index];\r\n    }\r\n  }\r\n\r\n  return null;\r\n};","import React from 'react';\r\nimport '../style/App.css';\r\nimport { Piece } from 'nes-tetris-representation/lib/piece-types';\r\nimport { Grid } from '@material-ui/core';\r\nimport TetrisGrid from './tetris-grid';\r\nimport choosePieceInputHandler from '../setup-components/choose-piece-input-handler';\r\nimport { getPieceGrid } from 'nes-tetris-representation/lib/move-piece';\r\n\r\ninterface PieceSelectorProps {\r\n  piece: Piece | null;\r\n  setPiece: (piece: Piece) => void;\r\n};\r\n\r\nclass PieceSelector extends React.Component<PieceSelectorProps> {\r\n  constructor(props: PieceSelectorProps) {\r\n    super(props);\r\n\r\n    this.setPieceFromInput = this.setPieceFromInput.bind(this);\r\n  }\r\n\r\n  setPieceFromInput(event: KeyboardEvent): void {\r\n    const piece = choosePieceInputHandler(event);\r\n\r\n    if (piece !== null) {\r\n      this.props.setPiece(piece);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this.setPieceFromInput);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this.setPieceFromInput);\r\n  }\r\n\r\n  drawPiece(piece: Piece, width: (6 | 12) = 6) {\r\n    return (\r\n      <Grid item xs={width} className=\"piece-selector-grid-item\">\r\n        <TetrisGrid\r\n          grid={getPieceGrid(piece)}\r\n          blockSizeInRem={1.5}\r\n          onClick={() => this.props.setPiece(piece)}\r\n          className={`piece-selector-selectable-piece selectable-piece${this.props.piece === piece ? ' selected-piece' : ''}`}\r\n          hideTopTwoRows={false}\r\n        />\r\n      </Grid>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Grid container direction=\"row\" justify=\"space-around\" alignItems=\"center\">\r\n        { this.drawPiece(Piece.L) }\r\n        { this.drawPiece(Piece.J) }\r\n        { this.drawPiece(Piece.Z) }\r\n        { this.drawPiece(Piece.S) }\r\n        { this.drawPiece(Piece.O) }\r\n        { this.drawPiece(Piece.T) }\r\n        { this.drawPiece(Piece.I, 12) }\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PieceSelector;\r\n","import React from 'react';\r\nimport { Dispatch } from 'redux';\r\nimport '../style/App.css';\r\nimport { connect } from 'react-redux';\r\nimport { setGrid, setState, resetScenario, setPrimaryPiece, setNextPiece, resetScenarioExceptPrimaryPiece, initializePlayOptionsState } from '../store/actions';\r\nimport FillPlayfield from './FillPlayfield';\r\nimport AddHoles from './AddHoles';\r\nimport { Grid, Piece } from 'nes-tetris-representation/lib/piece-types';\r\nimport { RootState } from '../store';\r\nimport { AppState } from '../store/types';\r\nimport inputHandler from './setup-input-handler';\r\nimport PieceSelector from '../reusable/PieceSelector';\r\n\r\ninterface AppProps {\r\n  grid: Grid;\r\n  state: AppState;\r\n  primaryPiece: Piece | null;\r\n  nextPiece: Piece | null;\r\n  setState: (state: AppState) => void;\r\n  setGrid: (grid: Grid) => void;\r\n  setPrimaryPiece: (piece: Piece) => void;\r\n  setNextPiece: (piece: Piece) => void;\r\n  moveToPlayOptions: () => void;\r\n};\r\n\r\nclass SetupPlayfield extends React.Component<AppProps> {\r\n  constructor(props: AppProps) {\r\n    super(props);\r\n\r\n    this.keyDownHandler = this.keyDownHandler.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this.keyDownHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this.keyDownHandler);\r\n  }\r\n\r\n  keyDownHandler(event: KeyboardEvent) {\r\n    inputHandler(\r\n      event,\r\n      this.props.state,\r\n      this.props.primaryPiece,\r\n      this.props.nextPiece,\r\n      this.props.setState,\r\n      this.props.moveToPlayOptions\r\n    );\r\n  }\r\n\r\n  render() {\r\n    switch (this.props.state) {\r\n      case AppState.SETUP_GRID:\r\n        return <FillPlayfield grid={this.props.grid} setGrid={this.props.setGrid} />;\r\n      case AppState.SETUP_ADD_HOLES:\r\n        return <AddHoles grid={this.props.grid} setGrid={this.props.setGrid} />;\r\n      case AppState.SETUP_CHOOSE_PRIMARY_PIECE:\r\n        return <PieceSelector piece={this.props.primaryPiece} setPiece={this.props.setPrimaryPiece} />;\r\n        case AppState.SETUP_CHOOSE_NEXT_PIECE:\r\n          return <PieceSelector piece={this.props.nextPiece} setPiece={this.props.setNextPiece} />;\r\n      default:\r\n        return <></>;\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  grid: state.grid,\r\n  state: state.state,\r\n  primaryPiece: state.primaryPiece,\r\n  nextPiece: state.nextPiece,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  setState: (state: AppState) => dispatch(setState(state)),\r\n  setGrid: (grid: Grid) => {\r\n    dispatch(resetScenario());\r\n    dispatch(setGrid(grid));\r\n  },\r\n  setPrimaryPiece: (piece: Piece) => {\r\n    dispatch(resetScenario());\r\n    dispatch(setPrimaryPiece(piece))\r\n  },\r\n  setNextPiece: (piece: Piece) => {\r\n    dispatch(resetScenarioExceptPrimaryPiece());\r\n    dispatch(setNextPiece(piece))\r\n  },\r\n  moveToPlayOptions: () => {\r\n    dispatch(initializePlayOptionsState());\r\n    dispatch(setState(AppState.OPTIONS_SUMMARIZE));\r\n  },\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SetupPlayfield);\r\n","import { Piece } from \"nes-tetris-representation/lib/piece-types\";\r\nimport { AppState } from \"../store/types\";\r\n\r\nexport default function inputHandler(\r\n  event: KeyboardEvent,\r\n  state: AppState,\r\n  primaryPiece: Piece | null,\r\n  nextPiece: Piece | null,\r\n  setState: (state: AppState) => void,\r\n  moveToPlayOptions: () => void,\r\n): void {\r\n  if (event.code === 'Space') {\r\n    event.preventDefault();\r\n    switch(state) {\r\n      case AppState.SETUP_GRID:\r\n        setState(AppState.SETUP_ADD_HOLES);\r\n        break;\r\n      case AppState.SETUP_ADD_HOLES:\r\n        setState(AppState.SETUP_CHOOSE_PRIMARY_PIECE);\r\n        break;\r\n      case AppState.SETUP_CHOOSE_PRIMARY_PIECE:\r\n        if (primaryPiece !== null) {\r\n          setState(AppState.SETUP_CHOOSE_NEXT_PIECE);\r\n        }\r\n        break;\r\n      case AppState.SETUP_CHOOSE_NEXT_PIECE:\r\n        if (nextPiece !== null) {\r\n          moveToPlayOptions();\r\n        }\r\n        break;\r\n    }\r\n  } else if (event.code === 'Backspace') {\r\n    switch(state) {\r\n      case AppState.SETUP_ADD_HOLES:\r\n        setState(AppState.SETUP_GRID);\r\n        break;\r\n      case AppState.SETUP_CHOOSE_PRIMARY_PIECE:\r\n        setState(AppState.SETUP_ADD_HOLES);\r\n        break;\r\n      case AppState.SETUP_CHOOSE_NEXT_PIECE:\r\n        setState(AppState.SETUP_CHOOSE_PRIMARY_PIECE);\r\n        break;\r\n    }\r\n  }\r\n};","import { ActivePiece, Grid, Piece } from \"nes-tetris-representation/lib/piece-types\";\r\n\r\nconst numpadMap: { [key: string]: Piece } = {\r\n  Numpad5: Piece.I,\r\n  Numpad4: Piece.O,\r\n  Numpad6: Piece.T,\r\n  Numpad7: Piece.L,\r\n  Numpad9: Piece.J,\r\n  Numpad1: Piece.S,\r\n  Numpad3: Piece.Z,\r\n};\r\n\r\nexport default function inputHandler(\r\n  event: KeyboardEvent,\r\n  currentPiece: ActivePiece | null,\r\n  grid: Grid,\r\n  setPieceInPlace: () => void,\r\n  getNewPiece: (piece: Piece) => ActivePiece,\r\n  movePiece: (grid: Grid, currentPiece: ActivePiece, newPiece: ActivePiece) => ActivePiece,\r\n  disabled?: boolean,\r\n): null | ActivePiece {\r\n  if (disabled) {\r\n    return null;\r\n  }\r\n\r\n  if (event.code.startsWith('Numpad')) {\r\n    const piece = numpadMap[event.code];\r\n\r\n    if (piece !== undefined) {\r\n      event.preventDefault();\r\n      return getNewPiece(piece);\r\n    }\r\n  }\r\n\r\n  if (\r\n    currentPiece === null ||\r\n    (event.code !== 'KeyD' &&\r\n    event.code !== 'KeyS' &&\r\n    event.code !== 'KeyA' &&\r\n    event.code !== 'ArrowUp' &&\r\n    event.code !== 'ArrowDown' &&\r\n    event.code !== 'ArrowLeft' &&\r\n    event.code !== 'ArrowRight' &&\r\n    event.code !== 'Space')\r\n  ) {\r\n    return null;\r\n  }\r\n\r\n  event.preventDefault();\r\n\r\n  var rowModifier: number;\r\n  if (event.code === 'KeyD' || event.code === 'Space') {\r\n    const blockMinRows = currentPiece.blocks.map(block => {\r\n      const firstBlockInTheWay = grid.map((row, rowIndex) =>\r\n        rowIndex > block.row && !!row[block.column]).indexOf(true);\r\n      return firstBlockInTheWay === -1 ? 22 - block.row : firstBlockInTheWay - block.row;\r\n    });\r\n\r\n    rowModifier = Math.min(...blockMinRows) - 1;\r\n\r\n    if (rowModifier === 0 && event.code === 'Space') {\r\n      setPieceInPlace();\r\n      return null;\r\n    }\r\n  } else {\r\n    rowModifier = event.code === 'ArrowUp' ? -1 : event.code === 'ArrowDown' ? 1 : 0;\r\n  }\r\n\r\n  const orientationModifier = event.code === 'KeyS' ? -1 : event.code === 'KeyA' ? 1 : 0;\r\n  const columnModifier = event.code === 'ArrowLeft' ? -1 : event.code === 'ArrowRight' ? 1 : 0;\r\n\r\n  const newPiece = Object.assign(\r\n    {},\r\n    currentPiece,\r\n    {\r\n      orientation: (currentPiece.orientation + orientationModifier + 4) % 4,\r\n      column: Math.min(currentPiece.column + columnModifier),\r\n      row: Math.min(currentPiece.row + rowModifier),\r\n    }\r\n  );\r\n\r\n  return movePiece(grid, currentPiece, newPiece);\r\n};","import React from 'react';\r\nimport '../style/App.css';\r\nimport { ListItem, List, Checkbox, IconButton, Grid, ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, FormControlLabel } from '@material-ui/core';\r\nimport Add from '@material-ui/icons/Add';\r\nimport CompareArrows from '@material-ui/icons/CompareArrows';\r\nimport Edit from '@material-ui/icons/Edit';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../store';\r\nimport { Option, AppState, OptionState, Comparison } from '../store/types';\r\nimport TetrisGrid from '../reusable/tetris-grid';\r\nimport { Piece, Grid as GridType } from 'nes-tetris-representation/lib/piece-types';\r\nimport { Dispatch } from 'redux';\r\nimport { setState, setPlayOptionsOption, addPlayOptionsOption, addComparison, setComparisonActivePiece, setActiveComparison, clearComparison } from '../store/actions';\r\n\r\ninterface OptionSummarizeProps {\r\n  options: Option[];\r\n  comparisons: Comparison[];\r\n  grid: GridType;\r\n  primaryPiece: Piece | null;\r\n  nextPiece: Piece | null;\r\n  setState: (state: AppState) => void;\r\n  goToOption: (id: number) => void;\r\n  addOption: () => void;\r\n  addComparison: (firstOption: number, secondOption: number) => void;\r\n  editComparison: (id: number) => void;\r\n};\r\n\r\ninterface OptionSummarizeState {\r\n  checked: number[];\r\n  selectedOption: number | null;\r\n  visibleOption: Option | null;\r\n  gridState: GridState;\r\n  beforeIntervalId: NodeJS.Timeout;\r\n};\r\n\r\nenum GridState {\r\n  START,\r\n  PRIMARY_PLACE,\r\n  AFTER_PRIMARY,\r\n  NEXT_PLACE,\r\n  AFTER_NEXT,\r\n};\r\n\r\nclass OptionSummarize extends React.Component<OptionSummarizeProps, OptionSummarizeState> {\r\n  constructor(props: OptionSummarizeProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selectedOption: this.props.options.length > 0 ? this.props.options[0].id : null,\r\n      visibleOption: null,\r\n      checked: [],\r\n      gridState: GridState.START,\r\n      beforeIntervalId: setInterval(() => this.setState({\r\n        gridState: this.getNextGridState(this.state.gridState),\r\n      }), 500),\r\n    };\r\n\r\n    this.toggleExpansion = this.toggleExpansion.bind(this);\r\n    this.getOptionPanel = this.getOptionPanel.bind(this);\r\n    this.showOption = this.showOption.bind(this);\r\n    this.hideOption = this.hideOption.bind(this);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.state.beforeIntervalId) {\r\n      clearInterval(this.state.beforeIntervalId);\r\n    }\r\n  }\r\n\r\n  getNextGridState(currentState: GridState): GridState {\r\n    switch (currentState) {\r\n      case GridState.START:\r\n        return GridState.PRIMARY_PLACE;\r\n      case GridState.PRIMARY_PLACE:\r\n        return GridState.AFTER_PRIMARY;\r\n      case GridState.AFTER_PRIMARY:\r\n        return GridState.NEXT_PLACE;\r\n      case GridState.NEXT_PLACE:\r\n        return GridState.AFTER_NEXT;\r\n      case GridState.AFTER_NEXT:\r\n        return GridState.START;\r\n    }\r\n  }\r\n\r\n  toggleExpansion(event: React.MouseEvent<HTMLDivElement>, id: number) {\r\n    event.stopPropagation();\r\n    if (this.state.selectedOption === id) {\r\n      this.setState({ selectedOption: null });\r\n    } else {\r\n      this.setState({ selectedOption: id });\r\n    }\r\n  }\r\n\r\n  toggleChecked(event: React.MouseEvent<HTMLButtonElement>, id: number) {\r\n    event.stopPropagation();\r\n\r\n    if (this.state.checked.includes(id)) {\r\n      this.setState({ checked: this.state.checked.filter(checkedId => checkedId !== id) });\r\n      return;\r\n    }\r\n\r\n    const option = this.props.options.find(option => option.id === id);\r\n    if (option === undefined || option.state !== OptionState.DONE) {\r\n      return;\r\n    }\r\n\r\n    if (this.state.checked.length < 2) {\r\n      this.setState({ checked: [...this.state.checked, id].sort() });\r\n      return;\r\n    }\r\n\r\n    this.setState({ checked: [this.state.checked[1], id].sort() });\r\n  }\r\n\r\n  showOption(option: Option) {\r\n    this.setState({ visibleOption: option });\r\n  }\r\n\r\n  hideOption() {\r\n    this.setState({ visibleOption: null });\r\n  }\r\n\r\n  getOptionPanel(option: Option, index: number) {\r\n    const { grid } = this.props;\r\n    const gridAfterFirstPiece = option.gridAfterFirstPiece || grid;\r\n    const gridAfterNextPiece = option.gridAfterNextPiece || gridAfterFirstPiece;\r\n    const gridAfterFirstPieceBeforeClear = option.gridAfterFirstPieceBeforeClear || grid;\r\n    const gridAfterNextPieceBeforeClear = option.gridAfterNextPieceBeforeClear || gridAfterFirstPiece;\r\n\r\n    let beforeGrid: GridType = grid;\r\n    let stateGrid: GridType = grid;\r\n\r\n    switch (this.state.gridState) {\r\n      case GridState.START:\r\n        beforeGrid = grid;\r\n        stateGrid = grid;\r\n        break;\r\n      case GridState.PRIMARY_PLACE:\r\n        beforeGrid = grid;\r\n        stateGrid = gridAfterFirstPieceBeforeClear;\r\n        break;\r\n      case GridState.AFTER_PRIMARY:\r\n        beforeGrid = gridAfterFirstPiece;\r\n        stateGrid = gridAfterFirstPiece;\r\n        break;\r\n      case GridState.NEXT_PLACE:\r\n        beforeGrid = gridAfterFirstPiece;\r\n        stateGrid = gridAfterNextPieceBeforeClear;\r\n        break;\r\n      case GridState.AFTER_NEXT:\r\n        beforeGrid = gridAfterNextPiece;\r\n        stateGrid = gridAfterNextPiece;\r\n        break;\r\n    }\r\n\r\n    return (\r\n      <ExpansionPanel key={option.id} expanded={this.state.selectedOption === option.id} onClick={(event) => this.toggleExpansion(event, option.id)}>\r\n        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n          <FormControlLabel\r\n            control={<Checkbox onClick={(event) => this.toggleChecked(event, option.id)} disabled={option.state !== OptionState.DONE} />}\r\n            label={`Option ${index + 1}`}\r\n          />\r\n          <IconButton onClick={() => this.props.goToOption(option.id)}>\r\n              <Edit />\r\n            </IconButton>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails>\r\n          <Grid container>\r\n            <Grid item xs={12}>\r\n              <TetrisGrid\r\n                grid={stateGrid}\r\n                beforeGrid={beforeGrid}\r\n                className=\"mini-grid\"\r\n                blockSizeInRem={0.5}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const [option1, option2] = this.state.checked.length === 2 ? this.state.checked : [null, null];\r\n\r\n    const compareMethod = this.state.checked.length === 2 ? () => this.props.addComparison(option1!, option2!) : undefined;\r\n    return (\r\n      <List>\r\n        <ListItem key=\"compare\" role={undefined} button onClick={compareMethod} disabled={!compareMethod}>\r\n          <CompareArrows />Compare selected options\r\n        </ListItem>\r\n        <ListItem key=\"add\" role={undefined} button onClick={this.props.addOption}><Add />Add Option</ListItem>\r\n        { this.props.options.map((option, optionIndex) => this.getOptionPanel(option, optionIndex)) }\r\n      </List>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  options: state.options,\r\n  comparisons: state.comparisons,\r\n  grid: state.grid,\r\n  primaryPiece: state.primaryPiece,\r\n  nextPiece: state.nextPiece,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  setState: (state: AppState) => dispatch(setState(state)),\r\n  goToOption: (id: number) => {\r\n    dispatch(setPlayOptionsOption(id));\r\n    dispatch(setState(AppState.OPTIONS_PLACE_PRIMARY_PIECE));\r\n  },\r\n  addOption: () => {\r\n    dispatch(addPlayOptionsOption());\r\n    dispatch(setState(AppState.OPTIONS_PLACE_PRIMARY_PIECE));\r\n  },\r\n  addComparison: (firstOption: number, secondOption: number) => {\r\n    dispatch(addComparison(firstOption, secondOption));\r\n    dispatch(setComparisonActivePiece(Piece.I));\r\n    dispatch(setState(AppState.COMPARE_ACTIVE));\r\n  },\r\n  editComparison: (id: number) => {\r\n    dispatch(setActiveComparison(id));\r\n    dispatch(clearComparison(id));\r\n    dispatch(setComparisonActivePiece(Piece.I));\r\n    dispatch(setState(AppState.COMPARE_ACTIVE));\r\n  }\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OptionSummarize);\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport '../style/App.css';\r\nimport { ActivePiece, Grid, Piece } from 'nes-tetris-representation/lib/piece-types';\r\nimport inputHandler from '../input-handler';\r\nimport TetrisGrid from './tetris-grid';\r\nimport { getPiece, movePiece } from 'nes-tetris-representation/lib/move-piece';\r\n\r\ninterface PlacePiecesProps {\r\n  grid: Grid;\r\n  activePiece: Piece | null;\r\n  setPiece: (grid: Grid, gridBeforeClear: Grid) => void;\r\n  disabled?: boolean;\r\n};\r\n\r\ninterface ComponentState {\r\n  currentPiece: ActivePiece | null,\r\n};\r\n\r\nclass PlacePieces extends React.Component<PlacePiecesProps, ComponentState> {\r\n  constructor(props: PlacePiecesProps) {\r\n    super(props);\r\n    this.state = {\r\n      currentPiece: this.props.activePiece === null ? null : this.getNewPiece(this.props.activePiece),\r\n    };\r\n\r\n    this.keyDownHandler = this.keyDownHandler.bind(this);\r\n    this.setPieceInPlace = this.setPieceInPlace.bind(this);\r\n    this.getNewPiece = this.getNewPiece.bind(this);\r\n    this.getBlockProps = this.getBlockProps.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this.keyDownHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this.keyDownHandler);\r\n  }\r\n\r\n  keyDownHandler(event: KeyboardEvent) {\r\n    const currentPiece = inputHandler(\r\n      event,\r\n      this.state.currentPiece,\r\n      this.props.grid,\r\n      this.setPieceInPlace,\r\n      this.getNewPiece,\r\n      movePiece,\r\n      this.props.disabled);\r\n\r\n    if (currentPiece) {\r\n      this.setState({ currentPiece });\r\n    }\r\n  }\r\n\r\n  setPieceInPlace(): void {\r\n    const { grid } = this.props;\r\n    const { currentPiece } = this.state;\r\n\r\n    if (currentPiece !== null) {\r\n      const newGrid = _.cloneDeep(grid) as number[][];\r\n      currentPiece.blocks.forEach(block => {\r\n        newGrid[block.row][block.column] = block.value;\r\n      });\r\n      const gridAfterPlaceBeforeClear = _.cloneDeep(newGrid);\r\n\r\n      const completeRows = newGrid.map(row => row.every(block => !!block));\r\n      completeRows.forEach((isRowComplete, index) => {\r\n        if (isRowComplete) {\r\n          newGrid.splice(index, 1);\r\n          newGrid.unshift(new Array(10).fill(0));\r\n        }\r\n      });\r\n\r\n      this.props.setPiece(newGrid as Grid, gridAfterPlaceBeforeClear as Grid);\r\n    }\r\n  }\r\n\r\n  getNewPiece(type: Piece): ActivePiece {\r\n    return getPiece({ type, row: 2, column: 5, orientation: 0 });\r\n  }\r\n\r\n  getBlockProps() {\r\n    return { disabled: this.props.disabled };\r\n  }\r\n\r\n  render() {\r\n    const drawnGrid: Grid = _.cloneDeep(this.props.grid);\r\n\r\n    if (this.state.currentPiece) {\r\n      this.state.currentPiece.blocks.forEach(block => {\r\n        drawnGrid[block.row][block.column] = block.value;\r\n      });\r\n    }\r\n\r\n    return <TetrisGrid grid={drawnGrid} getBlockProps={this.getBlockProps} />;\r\n  }\r\n}\r\n\r\nexport default PlacePieces;","import React from 'react';\r\nimport { Dispatch } from 'redux';\r\nimport '../style/App.css';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n  setState,\r\n  setPlayOptionsOptionState,\r\n  setPlayOptionsOptionGridAfterFirstPiece,\r\n  setPlayOptionsOptionGridAfterNextPiece,\r\n  setPlayOptionsOptionGridAfterPossibility,\r\n  setPlayOptionsOptionPossibility\r\n} from '../store/actions';\r\nimport PlacePieces from '../reusable/PlacePieces';\r\nimport OptionSummarize from './OptionSummarize';\r\nimport { Grid, Piece, PieceList } from 'nes-tetris-representation/lib/piece-types';\r\nimport { RootState } from '../store';\r\nimport { AppState, OptionState, Option } from '../store/types';\r\n\r\ninterface AppProps {\r\n  grid: Grid;\r\n  state: AppState;\r\n  activePiece: Piece | null;\r\n  nextPiece: Piece | null;\r\n  setPrimaryPiece: (grid: Grid, gridBeforeClear: Grid) => void;\r\n  setNextPiece: (grid: Grid, gridBeforeClear: Grid) => void;\r\n  option: Option | null,\r\n  setPossibility: (piece: Piece, grid: Grid, gridBeforeClear: Grid) => void;\r\n  advancePossibility: (option: Option) => void;\r\n};\r\n\r\ninterface AppComponentState {};\r\n\r\nfunction getPlayfield(\r\n  grid: Grid,\r\n  activePiece: Piece | null,\r\n  setPiece: (grid: Grid, gridBeforeClear: Grid) => void,\r\n  disabled?: boolean,\r\n): JSX.Element {\r\n  return <PlacePieces\r\n    key={`${grid.map(row => row.map(block => `${block}`).join(',')).join(',')} ${activePiece}`}\r\n    grid={grid}\r\n    activePiece={activePiece}\r\n    setPiece={setPiece}\r\n    disabled={disabled}\r\n  />;\r\n}\r\n\r\nclass OptionsPlayfield extends React.Component<AppProps, AppComponentState> {\r\n  render() {\r\n    switch (this.props.state) {\r\n      case AppState.OPTIONS_PLACE_PRIMARY_PIECE:\r\n        return getPlayfield(this.props.grid, this.props.activePiece, this.props.setPrimaryPiece);\r\n      case AppState.OPTIONS_PLACE_NEXT_PIECE:\r\n        if (this.props.option === null || this.props.option.gridAfterFirstPiece === null) {\r\n          throw new Error(`Option: ${this.props.option}, GridAfterFirstPiece: ${this.props.option?.gridAfterFirstPiece} for OPTIONS_PLACE_NEXT_PIECE`);\r\n        }\r\n        return getPlayfield(this.props.option.gridAfterFirstPiece, this.props.nextPiece, this.props.setNextPiece);\r\n      case AppState.OPTIONS_PLACE_POSSIBILITY:\r\n        if (\r\n          this.props.option === null ||\r\n          this.props.option.currentPossibility === null ||\r\n          this.props.option.gridAfterNextPiece === null\r\n        ) {\r\n          throw new Error(`\r\n            Option: ${this.props.option},\r\n            CurrentPossibility: ${this.props.option?.currentPossibility},\r\n            GridAfterFirstPiece: ${this.props.option?.gridAfterFirstPiece} for\r\n            OPTIONS_PLACE_POSSIBILITY\r\n          `);\r\n        }\r\n\r\n        const possibilityGrid = this.props.option[this.props.option.currentPossibility];\r\n\r\n        if (possibilityGrid !== null) {\r\n          return getPlayfield(\r\n            possibilityGrid,\r\n            null,\r\n            () => {},\r\n            true,\r\n          );\r\n        }\r\n\r\n        const currentPossibility = this.props.option.currentPossibility;\r\n        const setPossibility = (grid: Grid, gridBeforeClear: Grid) => {\r\n          this.props.setPossibility(currentPossibility, grid, gridBeforeClear);\r\n          this.props.advancePossibility(this.props.option as Option);\r\n        }\r\n        return getPlayfield(\r\n          this.props.option.gridAfterNextPiece,\r\n          currentPossibility,\r\n          setPossibility,\r\n          false,\r\n        );\r\n      case AppState.OPTIONS_SUMMARIZE:\r\n        return <OptionSummarize />\r\n      default:\r\n        return <>AGH</>\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  if (state.activeOptionId === null) {\r\n    return {\r\n      grid: state.grid,\r\n      state: state.state,\r\n      activePiece: state.primaryPiece,\r\n      nextPiece: state.nextPiece,\r\n      option: null,\r\n    };\r\n  }\r\n\r\n  const option = state.options[state.activeOptionId];\r\n  return {\r\n    grid: state.grid,\r\n    state: state.state,\r\n    activePiece: state.primaryPiece,\r\n    nextPiece: state.nextPiece,\r\n    option,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  setPrimaryPiece: (grid: Grid, gridBeforeClear: Grid) => {\r\n    dispatch(setPlayOptionsOptionState(OptionState.NEXT_PIECE));\r\n    dispatch(setPlayOptionsOptionGridAfterFirstPiece(grid, gridBeforeClear));\r\n    dispatch(setState(AppState.OPTIONS_PLACE_NEXT_PIECE));\r\n  },\r\n  setNextPiece: (grid: Grid, gridBeforeClear: Grid) => {\r\n    dispatch(setPlayOptionsOptionState(OptionState.POSSIBILITIES));\r\n    dispatch(setPlayOptionsOptionGridAfterNextPiece(grid, gridBeforeClear));\r\n    dispatch(setPlayOptionsOptionPossibility(Piece.I));\r\n    dispatch(setState(AppState.OPTIONS_PLACE_POSSIBILITY));\r\n  },\r\n  setPossibility: (possibility: Piece, grid: Grid, gridBeforeClear: Grid) => {\r\n    dispatch(setPlayOptionsOptionGridAfterPossibility(possibility, grid, gridBeforeClear));\r\n  },\r\n  advancePossibility: (option: Option) => {\r\n    const currentPieceIndex = PieceList.findIndex(({ value }) => value === option.currentPossibility);\r\n\r\n    if (currentPieceIndex === -1) {\r\n      dispatch(setPlayOptionsOptionPossibility(Piece.I))\r\n    } else if (PieceList.every(({ value }) => option[value] !== null)) {\r\n      dispatch(setPlayOptionsOptionState(OptionState.DONE));\r\n      dispatch(setState(AppState.OPTIONS_SUMMARIZE));\r\n    } else {\r\n      for (const piece of PieceList) {\r\n        if (option[piece.value] === null) {\r\n          dispatch(setPlayOptionsOptionPossibility(piece.value));\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OptionsPlayfield);\r\n","import { Comparison } from '../store/types';\r\nimport { Piece, PieceList } from 'nes-tetris-representation/lib/piece-types';\r\n\r\nexport enum ComparisonChoice {\r\n  FIRST,\r\n  SECOND,\r\n  SAME,\r\n};\r\n\r\n// As https://meatfighter.com/nintendotetrisai/#Picking_Tetriminos says, there is often bias on which pieces to pick that\r\n// makes choosing not random enough. This can result in preferring one option due to a small probability difference.\r\nconst biasedChanceMap = {\r\n  [Piece.I]: 7 / 56,\r\n  [Piece.O]: 8 / 56,\r\n  [Piece.T]: 9 / 56,\r\n  [Piece.J]: 8 / 56,\r\n  [Piece.L]: 7 / 56,\r\n  [Piece.S]: 9 / 56,\r\n  [Piece.Z]: 8 / 56,\r\n}\r\n\r\nconst getPieceProbabilities = (latestPiece: Piece) => {\r\n  return {\r\n    [Piece.I]: (latestPiece === Piece.I ? 0 : 1/8) + ((1/4) * biasedChanceMap[Piece.I]),\r\n    [Piece.O]: (latestPiece === Piece.O ? 0 : 1/8) + ((1/4) * biasedChanceMap[Piece.O]),\r\n    [Piece.T]: (latestPiece === Piece.T ? 0 : 1/8) + ((1/4) * biasedChanceMap[Piece.T]),\r\n    [Piece.J]: (latestPiece === Piece.J ? 0 : 1/8) + ((1/4) * biasedChanceMap[Piece.J]),\r\n    [Piece.L]: (latestPiece === Piece.L ? 0 : 1/8) + ((1/4) * biasedChanceMap[Piece.L]),\r\n    [Piece.S]: (latestPiece === Piece.S ? 0 : 1/8) + ((1/4) * biasedChanceMap[Piece.S]),\r\n    [Piece.Z]: (latestPiece === Piece.Z ? 0 : 1/8) + ((1/4) * biasedChanceMap[Piece.Z]),\r\n  }\r\n}\r\n\r\nexport default (nextPiece: Piece, comparison: Comparison): ComparisonChoice => {\r\n  const pieceProbabilities = getPieceProbabilities(nextPiece);\r\n\r\n  let firstCount = 0;\r\n  let secondCount = 0;\r\n\r\n  PieceList.forEach(({ value }: { value: Piece }) => {\r\n    const weightedValue = pieceProbabilities[value];\r\n\r\n    switch (comparison[value])\r\n    {\r\n      case comparison.firstOption.id:\r\n        firstCount += weightedValue;\r\n        break;\r\n      case comparison.secondOption.id:\r\n        secondCount += weightedValue;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  });\r\n\r\n  if (firstCount > secondCount) {\r\n    return ComparisonChoice.FIRST;\r\n  } else if (firstCount < secondCount) {\r\n    return ComparisonChoice.SECOND;\r\n  } else {\r\n    return ComparisonChoice.SAME;\r\n  }\r\n};","import React from 'react';\r\nimport '../style/App.css';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../store';\r\nimport { Option, Comparison } from '../store/types';\r\nimport TetrisGrid from '../reusable/tetris-grid';\r\nimport { Piece, Grid as GridType } from 'nes-tetris-representation/lib/piece-types';\r\nimport calculateComparison, { ComparisonChoice } from './calculate-comparison';\r\nimport { Grid } from '@material-ui/core';\r\n\r\ninterface CompareSummarizeProps {\r\n  comparison: Comparison;\r\n  grid: GridType;\r\n  primaryPiece: Piece | null;\r\n  nextPiece: Piece | null;\r\n};\r\n\r\ninterface CompareSummarizeState {\r\n  gridState: GridState;\r\n  beforeIntervalId: NodeJS.Timeout;\r\n};\r\n\r\nenum GridState {\r\n  START,\r\n  PRIMARY_PLACE,\r\n  AFTER_PRIMARY,\r\n  NEXT_PLACE,\r\n  AFTER_NEXT,\r\n};\r\n\r\nclass CompareSummarize extends React.Component<CompareSummarizeProps, CompareSummarizeState> {\r\n  constructor(props: CompareSummarizeProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      gridState: GridState.START,\r\n      beforeIntervalId: setInterval(() => this.setState({\r\n        gridState: this.getNextGridState(this.state.gridState),\r\n      }), 1000),\r\n    };\r\n\r\n    this.getAnimationGrid = this.getAnimationGrid.bind(this);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.state.beforeIntervalId) {\r\n      clearInterval(this.state.beforeIntervalId);\r\n    }\r\n  }\r\n\r\n  getNextGridState(currentState: GridState): GridState {\r\n    switch (currentState) {\r\n      case GridState.START:\r\n        return GridState.PRIMARY_PLACE;\r\n      case GridState.PRIMARY_PLACE:\r\n        return GridState.AFTER_PRIMARY;\r\n      case GridState.AFTER_PRIMARY:\r\n        return GridState.NEXT_PLACE;\r\n      case GridState.NEXT_PLACE:\r\n        return GridState.AFTER_NEXT;\r\n      case GridState.AFTER_NEXT:\r\n        return GridState.START;\r\n    }\r\n  }\r\n\r\n  getAnimationGrid(option: Option) {\r\n    const { grid } = this.props;\r\n    const gridAfterFirstPiece = option.gridAfterFirstPiece || grid;\r\n    const gridAfterNextPiece = option.gridAfterNextPiece || gridAfterFirstPiece;\r\n    const gridAfterFirstPieceBeforeClear = option.gridAfterFirstPieceBeforeClear || grid;\r\n    const gridAfterNextPieceBeforeClear = option.gridAfterNextPieceBeforeClear || gridAfterFirstPiece;\r\n\r\n    let beforeGrid: GridType = grid;\r\n    let stateGrid: GridType = grid;\r\n\r\n    switch (this.state.gridState) {\r\n      case GridState.START:\r\n        beforeGrid = grid;\r\n        stateGrid = grid;\r\n        break;\r\n      case GridState.PRIMARY_PLACE:\r\n        beforeGrid = grid;\r\n        stateGrid = gridAfterFirstPieceBeforeClear;\r\n        break;\r\n      case GridState.AFTER_PRIMARY:\r\n        beforeGrid = gridAfterFirstPiece;\r\n        stateGrid = gridAfterFirstPiece;\r\n        break;\r\n      case GridState.NEXT_PLACE:\r\n        beforeGrid = gridAfterFirstPiece;\r\n        stateGrid = gridAfterNextPieceBeforeClear;\r\n        break;\r\n      case GridState.AFTER_NEXT:\r\n        beforeGrid = gridAfterNextPiece;\r\n        stateGrid = gridAfterNextPiece;\r\n        break;\r\n    }\r\n\r\n    return (\r\n      <TetrisGrid\r\n        grid={stateGrid}\r\n        beforeGrid={beforeGrid}\r\n        className=\"mini-grid\"\r\n        blockSizeInRem={0.75}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let message: string | null = null;\r\n    let result: JSX.Element | null = null;\r\n\r\n    switch (calculateComparison(this.props.nextPiece!, this.props.comparison)) {\r\n      case ComparisonChoice.FIRST:\r\n        message = `You chose: Option ${this.props.comparison.firstOption!.id + 1}`;\r\n        result = this.getAnimationGrid(this.props.comparison.firstOption!);\r\n        break;\r\n      case ComparisonChoice.SECOND:\r\n        message = `You chose: Option ${this.props.comparison.secondOption!.id + 1}`;\r\n        result = this.getAnimationGrid(this.props.comparison.secondOption!);\r\n        break;\r\n      case ComparisonChoice.SAME:\r\n        message = 'You considered both options equally good';\r\n        result = (<>\r\n          { this.getAnimationGrid(this.props.comparison.firstOption!) }\r\n          { this.getAnimationGrid(this.props.comparison.secondOption!) }\r\n        </>);\r\n        break;\r\n    }\r\n\r\n    return <Grid\r\n      container\r\n      spacing={2}\r\n      style={{ marginTop: '2rem' }}\r\n      direction=\"column\"\r\n      alignItems=\"center\"\r\n      justify=\"center\"\r\n    >\r\n      <Grid item xs={12}>\r\n        <div style={{ marginBottom: '1rem' }}>{ message }</div>\r\n        { result }\r\n      </Grid>\r\n    </Grid>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  grid: state.grid,\r\n  primaryPiece: state.primaryPiece,\r\n  nextPiece: state.nextPiece,\r\n});\r\n\r\nexport default connect(mapStateToProps)(CompareSummarize);\r\n","import React from 'react';\r\nimport { Dispatch } from 'redux';\r\nimport '../style/App.css';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../store';\r\nimport { AppState, Option, Comparison, OptionState } from '../store/types';\r\nimport { addComparison, setState, setComparisonActivePiece, setComparisonPieceChoice, advanceComparisonActivePiece } from '../store/actions';\r\nimport { ListItem, ListItemText, List, ListItemIcon, Checkbox, Grid, Button } from '@material-ui/core';\r\nimport { Piece, Grid as GridType } from 'nes-tetris-representation/lib/piece-types';\r\nimport TetrisGrid from '../reusable/tetris-grid';\r\nimport CompareSummarize from './CompareSummarize';\r\n\r\ninterface ComparePlayfieldProps {\r\n  state: AppState;\r\n  options: Option[];\r\n  activeComparison: Comparison | null;\r\n  nextPiece: Piece | null;\r\n  addComparison: (firstOption: number, secondOption: number) => void;\r\n  chooseOption: (id: number | null) => void;\r\n};\r\n\r\ninterface ComparePlayfieldState {\r\n  checked: number[];\r\n  compareState: CompareState;\r\n  beforeIntervalId: NodeJS.Timeout | null;\r\n}\r\n\r\nenum CompareState {\r\n  START,\r\n  PLACE,\r\n  CLEAR,\r\n};\r\n\r\nclass ComparePlayfield extends React.Component<ComparePlayfieldProps, ComparePlayfieldState> {\r\n  constructor(props: ComparePlayfieldProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      checked: [],\r\n      compareState: CompareState.START,\r\n      beforeIntervalId: null\r\n    }\r\n\r\n    this.toggleOption = this.toggleOption.bind(this);\r\n    this.chooseOption = this.chooseOption.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      beforeIntervalId: setInterval(() => this.props.state !== AppState.COMPARE_COMPLETE ? this.setState({\r\n        compareState: this.state.compareState === CompareState.START\r\n          ? CompareState.PLACE\r\n          : this.state.compareState === CompareState.PLACE\r\n            ? CompareState.CLEAR\r\n            : CompareState.START,\r\n      }) : undefined, 600),\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.state.beforeIntervalId !== null) {\r\n      clearInterval(this.state.beforeIntervalId);\r\n    }\r\n  }\r\n\r\n  toggleOption(id: number) {\r\n    if (this.state.checked.includes(id)) {\r\n      this.setState({ checked: this.state.checked.filter(checkedId => checkedId !== id) });\r\n      return;\r\n    }\r\n\r\n    if (this.state.checked.length < 2) {\r\n      this.setState({ checked: [...this.state.checked, id] });\r\n      return;\r\n    }\r\n\r\n    this.setState({ checked: [this.state.checked[1], id] });\r\n  }\r\n\r\n  chooseOption(id: number): void {\r\n    this.setState({\r\n      compareState: CompareState.START,\r\n    });\r\n    this.props.chooseOption(id);\r\n  }\r\n\r\n  getOptionGroup(option: Option, activePossibility: Piece) {\r\n    let beforeGrid: GridType | null;\r\n    let nowGrid: GridType;\r\n\r\n    switch (this.state.compareState) {\r\n      case CompareState.START:\r\n        beforeGrid = null;\r\n        nowGrid = option.gridAfterNextPiece!;\r\n        break;\r\n      case CompareState.PLACE:\r\n        beforeGrid = option.gridAfterNextPiece;\r\n        nowGrid = option[activePossibility]!;\r\n        break;\r\n      case CompareState.CLEAR:\r\n        beforeGrid = null;\r\n        nowGrid = option[activePossibility]!;\r\n    }\r\n\r\n    if (nowGrid === null) {\r\n      return null;\r\n    }\r\n\r\n    return <Grid container>\r\n      <Grid item xs={12}>\r\n        <TetrisGrid\r\n          onClick={() => this.chooseOption(option.id)}\r\n          grid={nowGrid}\r\n          beforeGrid={beforeGrid}\r\n          className=\"mini-grid\"\r\n          blockSizeInRem={0.75}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  }\r\n\r\n  render() {\r\n    switch (this.props.state) {\r\n      case AppState.COMPARE:\r\n        return (\r\n          <List>\r\n            {\r\n              this.props.options.filter(option => option.state === OptionState.DONE).map(option =>\r\n                <ListItem button onClick={() => this.toggleOption(option.id)}>\r\n                  <ListItemIcon>\r\n                    <Checkbox\r\n                      edge=\"start\"\r\n                      checked={this.state.checked.includes(option.id)}\r\n                      tabIndex={-1}\r\n                      disableRipple\r\n                    />\r\n                  </ListItemIcon>\r\n                  <ListItemText primary={`Option ${option.id + 1}`} />\r\n                </ListItem>\r\n              )\r\n            }\r\n            <ListItem\r\n              button\r\n              disabled={this.state.checked.length !== 2}\r\n              onClick={() => this.props.addComparison(this.state.checked[0], this.state.checked[1])}\r\n            >\r\n              Compare\r\n            </ListItem>\r\n          </List>\r\n        );\r\n      case AppState.COMPARE_ACTIVE:\r\n        if (this.props.activeComparison === null) {\r\n          return 'Active compare but null activeComparison';\r\n        }\r\n\r\n        if (this.props.activeComparison.activePiece === null) {\r\n          return 'No active piece on activeComparison';\r\n        }\r\n        const firstGrid = this.props.activeComparison.firstOption[this.props.activeComparison.activePiece];\r\n        const secondGrid = this.props.activeComparison.secondOption[this.props.activeComparison.activePiece];\r\n\r\n        if (firstGrid === null || secondGrid === null) {\r\n          return 'First or second grid is null on activeComparison for active piece';\r\n        }\r\n\r\n        return <Grid\r\n          container\r\n          spacing={2}\r\n          style={{ marginTop: '2rem' }}\r\n          direction=\"column\"\r\n          alignItems=\"center\"\r\n          justify=\"center\"\r\n        >\r\n          <Grid item xs={12}>\r\n            { this.getOptionGroup(this.props.activeComparison.firstOption, this.props.activeComparison.activePiece) }\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            { this.getOptionGroup(this.props.activeComparison.secondOption, this.props.activeComparison.activePiece) }\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Button\r\n              style={{ margin: '1rem 0.25rem' }}\r\n              size=\"small\"\r\n              variant=\"contained\"\r\n              onClick={() => this.props.chooseOption(this.props.activeComparison!.firstOption.id)}\r\n            >\r\n              Top Option\r\n            </Button>\r\n            <Button\r\n              style={{ margin: '1rem 0.25rem' }}\r\n              size=\"small\"\r\n              variant=\"contained\"\r\n              onClick={() => this.props.chooseOption(this.props.activeComparison!.secondOption.id)}\r\n            >\r\n              Bottom Option\r\n            </Button>\r\n            <Button\r\n              style={{ margin: '1rem 0.25rem' }}\r\n              size=\"small\"\r\n              variant=\"contained\"\r\n              onClick={() => this.props.chooseOption(null)}\r\n            >\r\n              Equal\r\n            </Button>\r\n          </Grid>\r\n        </Grid>;\r\n      case AppState.COMPARE_COMPLETE:\r\n        return <CompareSummarize comparison={this.props.activeComparison!} />;\r\n      default:\r\n        return <>AGH</>\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  const comparison = state.activeComparisonId === null ? undefined : state.comparisons.find(c => c.id === state.activeComparisonId);\r\n  return {\r\n    state: state.state,\r\n    options: state.options,\r\n    activeComparison: comparison === undefined ? null : comparison,\r\n    nextPiece: state.nextPiece,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  addComparison: (firstOption: number, secondOption: number) => {\r\n    dispatch(addComparison(firstOption, secondOption));\r\n    dispatch(setComparisonActivePiece(Piece.I));\r\n    dispatch(setState(AppState.COMPARE_ACTIVE));\r\n  },\r\n  chooseOption: (id: number | null) => {\r\n    dispatch(setComparisonPieceChoice(id));\r\n    dispatch(advanceComparisonActivePiece());\r\n  },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ComparePlayfield);\r\n","import React from 'react';\r\nimport '../style/App.css';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../store';\r\nimport { AppStateCategory, getAppStateCategory } from '../store/types';\r\nimport SetupPlayfield from '../setup-components/SetupPlayfield';\r\nimport OptionsPlayfield from '../option-components/OptionsPlayfield';\r\nimport ComparePlayfield from '../compare-components/ComparePlayfield';\r\n\r\ninterface AppProps {\r\n  stateCategory: AppStateCategory;\r\n};\r\n\r\nfunction getPlayfield(category: AppStateCategory): JSX.Element {\r\n  switch (category) {\r\n    case AppStateCategory.SETUP:\r\n      return <SetupPlayfield />;\r\n    case AppStateCategory.OPTIONS:\r\n      return <OptionsPlayfield />;\r\n    case AppStateCategory.COMPARE:\r\n      return <ComparePlayfield />;\r\n    default:\r\n      return <></>;\r\n  }\r\n}\r\n\r\nclass Playfield extends React.Component<AppProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"playfield\">\r\n        { getPlayfield(this.props.stateCategory) }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({ stateCategory: getAppStateCategory(state.state) });\r\n\r\nexport default connect(mapStateToProps)(Playfield);\r\n","import React from 'react';\r\nimport '../style/App.css';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../store';\r\nimport { Piece, PieceList } from 'nes-tetris-representation/lib/piece-types';\r\nimport TetrisGrid from '../reusable/tetris-grid';\r\nimport { getPieceGrid } from 'nes-tetris-representation/lib/move-piece';\r\nimport { AppState } from '../store/types';\r\n\r\ninterface NextBoxProps {\r\n  state: AppState;\r\n  nextPiece: Piece | null;\r\n  nextPossibility: Piece | null;\r\n};\r\n\r\nclass NextBox extends React.Component<NextBoxProps> {\r\n  render() {\r\n    var piece: Piece | null = null;\r\n    switch(this.props.state) {\r\n      case AppState.OPTIONS_PLACE_PRIMARY_PIECE:\r\n        piece = this.props.nextPiece;\r\n        break;\r\n      case AppState.OPTIONS_PLACE_NEXT_PIECE:\r\n        piece = Piece.I;\r\n        break;\r\n      case AppState.OPTIONS_PLACE_POSSIBILITY:\r\n        piece = this.props.nextPossibility;\r\n        break;\r\n    }\r\n    return (\r\n        <div className=\"next-box\">\r\n          {\r\n            piece === null\r\n            ? null\r\n            : <TetrisGrid grid={getPieceGrid(piece)} hideTopTwoRows={false} blockSizeInRem={1.5} />\r\n          }\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  const option = state.options.find(option => option.id === state.activeOptionId);\r\n  const activePossibilityIndex = option && option.currentPossibility !== null\r\n    ? PieceList.findIndex(piece => piece.value === option.currentPossibility)\r\n    : undefined;\r\n\r\n  return {\r\n    state: state.state,\r\n    nextPiece: state.nextPiece,\r\n    nextPossibility: activePossibilityIndex !== undefined && activePossibilityIndex < PieceList.length - 1\r\n      ? PieceList[(activePossibilityIndex + PieceList.length + 1) % PieceList.length].value\r\n      : null,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(NextBox);\r\n","import React from 'react';\r\nimport '../style/App.css';\r\nimport { connect } from 'react-redux';\r\nimport { RootState } from '../store';\r\nimport { Tabs, Tab } from '@material-ui/core';\r\nimport { getAppStateCategory, AppStateCategory, AppState, OptionState } from '../store/types';\r\nimport { setState, clearAllComparisons } from '../store/actions';\r\nimport { Dispatch } from 'redux';\r\n\r\ninterface TopBoxProps {\r\n  category: AppStateCategory;\r\n  optionsDisabled: boolean;\r\n  compareDisabled: boolean;\r\n  goToCategory: (category: AppStateCategory) => void;\r\n};\r\n\r\nclass TopBox extends React.Component<TopBoxProps> {\r\n  render() {\r\n    return (\r\n      <Tabs variant=\"fullWidth\" width=\"10rem\" value={this.props.category === 2 ? 1 : this.props.category} className=\"top-box\">\r\n        <Tab\r\n          value={AppStateCategory.SETUP}\r\n          onClick={() => this.props.goToCategory(AppStateCategory.SETUP)} label=\"SETUP\"\r\n        />\r\n        <Tab\r\n          value={AppStateCategory.OPTIONS}\r\n          onClick={() => this.props.goToCategory(AppStateCategory.OPTIONS)} label=\"SIMULATE\"\r\n          disabled={this.props.optionsDisabled}\r\n        />\r\n      </Tabs>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  category: getAppStateCategory(state.state),\r\n  optionsDisabled: state.grid === null || state.primaryPiece === null || state.nextPiece === null,\r\n  compareDisabled: state.options.length < 2 || state.options.filter(option => option.state === OptionState.DONE).length < 2,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  goToCategory: (category: AppStateCategory) => {\r\n    switch(category) {\r\n      case AppStateCategory.SETUP:\r\n        dispatch(setState(AppState.SETUP_GRID));\r\n        break;\r\n      case AppStateCategory.OPTIONS:\r\n        dispatch(clearAllComparisons());\r\n        dispatch(setState(AppState.OPTIONS_SUMMARIZE));\r\n        break;\r\n      case AppStateCategory.COMPARE:\r\n        dispatch(setState(AppState.OPTIONS_SUMMARIZE));\r\n        break;\r\n    }\r\n  },\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TopBox);\r\n","import React from 'react';\r\nimport background from './static/background.png';\r\nimport './style/App.css';\r\nimport LocalStepper from './layout-components/LocalStepper';\r\nimport Playfield from './layout-components/Playfield';\r\nimport NextBox from './layout-components/NextBox';\r\nimport TopBox from './layout-components/TopBox';\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div draggable=\"false\" className=\"background\">\r\n          <img draggable=\"false\" src={background} alt=\"\" />\r\n        </div>\r\n        <LocalStepper />\r\n        <Playfield />\r\n        <NextBox />\r\n        <TopBox />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore } from 'redux';\r\nimport reducer from './store';\r\nimport './style/index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core';\r\n\r\nfunction configureStore(preloadedState) {\r\n  const store = createStore(\r\n    reducer,\r\n    preloadedState,\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n  );\r\n\r\n  if (process.env.NODE_ENV !== 'production' && module.hot) {\r\n    module.hot.accept('./store', () => store.replaceReducer(reducer));\r\n  }\r\n\r\n  return store;\r\n}\r\n\r\nconst store = configureStore();\r\n\r\nconst darkTheme = createMuiTheme({\r\n  palette: {\r\n    type: 'dark',\r\n    background: {\r\n      paper: 'black',\r\n    }\r\n  },\r\n});\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ThemeProvider theme={darkTheme}>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </ThemeProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}